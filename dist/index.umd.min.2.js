(("undefined"!==typeof self?self:this)["webpackJsonpindex"]=("undefined"!==typeof self?self:this)["webpackJsonpindex"]||[]).push([[2],{ca4e:function(e,t,a){"use strict";a.r(t),a.d(t,"getSuffix",(function(){return s})),a.d(t,"getExtByType",(function(){return o}));var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{attrs:{action:"","show-file-list":e.showFileList,accept:e.actualAccept,data:e.data,"list-type":e.listType,"file-list":e.fileList,"before-upload":e.handleBeforeUpload,"http-request":e.customUpload,disabled:e.disabled,multiple:e.multiple,limit:e.limit,"on-exceed":e.handleExceed}},[a("div",{attrs:{id:e.triggerId}},[e._t("default",(function(){return[a("el-button",{attrs:{size:"small",type:"primary",disabled:e.disabled}},[e._v(" 点击上传 ")])]}))],2)])},l=[],r=a("8bbf"),u=a.n(r),d=a("af90");const s=e=>{let t=e.lastIndexOf("."),a="";return-1!=t&&(a=e.substring(t+1)),a.toLowerCase()},n=u.a.uploaderDefault.FileTypeMap||{},o=e=>{if(e&&Array.isArray(n[e])){let t=[],a=[];return n[e].forEach(e=>{0===e.indexOf("t-")?t.push(e):a.push(e)}),t.length&&t.forEach(e=>{a=a.concat(o(e))}),a}if(e&&e.split)return[e.toLowerCase()]};var p={props:{multiple:{type:Boolean,required:!1,default:u.a.uploaderDefault.multiple},data:{type:Object,required:!1,default:u.a.uploaderDefault.data},name:{type:String,required:!1,default:u.a.uploaderDefault.name},showFileList:{type:Boolean,required:!1,default:u.a.uploaderDefault.showFileList},accept:{type:String,required:!1,default:u.a.uploaderDefault.accept},listType:{type:String,required:!1,default:u.a.uploaderDefault.listType},fileList:{type:Array,required:!1,default:u.a.uploaderDefault.fileList},disabled:{type:Boolean,required:!1,default:u.a.uploaderDefault.disabled},limit:{type:Number,required:!1,default:u.a.uploaderDefault.limit},beforeUpload:{type:Function,required:!1,default:u.a.uploaderDefault.beforeUpload},triggerId:{type:String,required:!1,default:"upload_image_trigger"+parseInt(1e8*Math.random())},imgCompress:{type:Boolean,required:!1,default:u.a.uploaderDefault.imgCompress},imgCompressOption:{type:Object,required:!1,default:u.a.uploaderDefault.imgCompressOption},uploadFunc:{type:Function,required:!1,default:u.a.uploaderDefault.uploadFunc},uploadBase64Func:{type:Function,required:!1,default:u.a.uploaderDefault.uploadBase64Func},limitSize:{type:Number,required:!1,default:u.a.uploaderDefault.limitSize}},computed:{actualAccept(){if(-1!==this.accept.indexOf("t-")){const e=this.accept.split(",");let t=[];return e.forEach(e=>{t=t.concat(o(e))}),t.join(",")}return this.accept}},methods:{handleExceed(){this.$emit("exceed")},handleSuccess:function(e){this.$emit("success",e.data)},handleError:function(e){this.$emit("error",e)},handleBeforeUpload:function(e){const t=s(e.name),a=this.actualAccept.replace(/\./g,"").split(",");return-1===a.findIndex(e=>"*"===e||e===t)?(this.$message.warning("文件格式错误"),!1):e.size>this.limitSize?(this.$message.warning("文件超出最大限制"),!1):e.name.length>500?(this.$message.warning("文件名不得超过500字符"),!1):this.beforeUpload(e)},customUpload:function(e){if(this.imgCompress&&0===e.file.type.indexOf("image/"))Object(d["a"])(e.file,this.imgCompressOption).then(t=>{const a=e.file.name.replace(/\.[^.]+\w+$/,".png");t&&a?this.uploadBase64Func({base64:t,name:a}).then(e=>{this.handleSuccess(e.data)}).catch(e=>{this.handleError(e)}):console.warn("图片压缩error",t,a)});else{let t=new FormData;t.append(this.name,e.file),Object.keys(this.data).forEach(e=>{t.append(e,this.data[e])}),this.uploadFunc(t).then(e=>{this.handleSuccess(e.data)}).catch(e=>{this.handleError(e)})}}}},c=p,f=a("2877"),h=Object(f["a"])(c,i,l,!1,null,"ce77dcbc",null);t["default"]=h.exports}}]);
//# sourceMappingURL=index.umd.min.2.js.map
(("undefined"!==typeof self?self:this)["webpackJsonpindex"]=("undefined"!==typeof self?self:this)["webpackJsonpindex"]||[]).push([[2],{ca4e:function(e,t,i){"use strict";i.r(t),i.d(t,"getSuffix",(function(){return n})),i.d(t,"getExtByType",(function(){return u}));var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-upload",{attrs:{action:"","show-file-list":e.showFileList,accept:e.actualAccept,data:e.data,"list-type":e.listType,"file-list":e.fileList,"before-upload":e.handleBeforeUpload,"http-request":e.customUpload,disabled:e.disabled,multiple:e.multiple,limit:e.limit,"on-exceed":e.handleExceed}},[i("div",{attrs:{id:e.triggerId}},[e._t("default",(function(){return[i("el-button",{attrs:{size:"small",type:"primary",disabled:e.disabled}},[e._v(" 点击上传 ")])]}))],2)])},r=[],l=i("b635"),s=i("af90");const n=e=>{let t=e.lastIndexOf("."),i="";return-1!=t&&(i=e.substring(t+1)),i.toLowerCase()},d=l["b"].FileTypeMap||{},u=e=>{if(e&&Array.isArray(d[e])){let t=[],i=[];return d[e].forEach(e=>{0===e.indexOf("t-")?t.push(e):i.push(e)}),t.length&&t.forEach(e=>{i=i.concat(u(e))}),i}if(e&&e.split)return[e.toLowerCase()]};var o={name:"Uploader",props:{multiple:{type:Boolean,required:!1,default:l["b"].multiple},data:{type:Object,required:!1,default:l["b"].data},name:{type:String,required:!1,default:l["b"].name},showFileList:{type:Boolean,required:!1,default:l["b"].showFileList},accept:{type:String,required:!1,default:l["b"].accept},listType:{type:String,required:!1,default:l["b"].listType},fileList:{type:Array,required:!1,default:l["b"].fileList},disabled:{type:Boolean,required:!1,default:l["b"].disabled},limit:{type:Number,required:!1,default:l["b"].limit},beforeUpload:{type:Function,required:!1,default:l["b"].beforeUpload},triggerId:{type:String,required:!1,default:"upload_image_trigger"+parseInt(1e8*Math.random())},imgCompress:{type:Boolean,required:!1,default:l["b"].imgCompress},imgCompressOption:{type:Object,required:!1,default:l["b"].imgCompressOption},uploadFunc:{type:Function,required:!1,default:l["b"].uploadFunc},uploadBase64Func:{type:Function,required:!1,default:l["b"].uploadBase64Func},limitSize:{type:Number,required:!1,default:l["b"].limitSize}},computed:{actualAccept(){if(-1!==this.accept.indexOf("t-")){const e=this.accept.split(",");let t=[];return e.forEach(e=>{t=t.concat(u(e))}),t.join(",")}return this.accept}},methods:{handleExceed(){this.$emit("exceed")},handleSuccess:function(e){this.$emit("success",e.data)},handleError:function(e){this.$emit("error",e)},handleBeforeUpload:function(e){const t=n(e.name),i=this.actualAccept.replace(/\./g,"").split(",");return-1===i.findIndex(e=>"*"===e||e===t)?(this.$message.warning("文件格式错误"),!1):e.size>this.limitSize?(this.$message.warning("文件超出最大限制"),!1):e.name.length>500?(this.$message.warning("文件名不得超过500字符"),!1):this.beforeUpload(e)},customUpload:function(e){if(this.imgCompress&&0===e.file.type.indexOf("image/"))Object(s["a"])(e.file,this.imgCompressOption).then(t=>{const i=e.file.name.replace(/\.[^.]+\w+$/,".png");t&&i?this.uploadBase64Func({base64:t,name:i}).then(e=>{this.handleSuccess(e.data)}).catch(e=>{this.handleError(e)}):console.warn("图片压缩error",t,i)});else{let t=new FormData;t.append(this.name,e.file),Object.keys(this.data).forEach(e=>{t.append(e,this.data[e])}),this.uploadFunc(t).then(e=>{this.handleSuccess(e.data)}).catch(e=>{this.handleError(e)})}}}},p=o,c=i("2877"),f=Object(c["a"])(p,a,r,!1,null,"020cd7e6",null);t["default"]=f.exports}}]);
//# sourceMappingURL=index.umd.min.2.js.map
(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["index"]=t(require("vue")):e["index"]=t(e["Vue"])})("undefined"!==typeof self?self:this,(e=>(()=>{var t={679:function(e,t){var n,r,i;(function(o,a){r=[],n=a,i="function"===typeof n?n.apply(t,r):n,void 0===i||(e.exports=i)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(u){var n,r,i,o=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,a=/@([^@]*):(\d+):(\d+)\s*$/gi,s=o.exec(u.stack)||a.exec(u.stack),l=s&&s[1]||!1,p=s&&s[2]||!1,c=document.location.href.replace(document.location.hash,""),h=document.getElementsByTagName("script");l===c&&(n=document.documentElement.outerHTML,r=new RegExp("(?:[^\\n]+?\\n){0,"+(p-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),i=n.replace(r,"$1").trim());for(var d=0;d<h.length;d++){if("interactive"===h[d].readyState)return h[d];if(h[d].src===l)return h[d];if(l===c&&h[d].innerHTML&&h[d].innerHTML.trim()===i)return h[d]}return null}}return e}))},129:function(e){
/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */
(function(t,n){e.exports=n()})(0,(function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return l(e)||p(e)||c(e)||d()}function l(e){if(Array.isArray(e))return h(e)}function p(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u="undefined"!==typeof window&&"undefined"!==typeof window.document,g=u?window:{},f=!(!u||!g.document.documentElement)&&"ontouchstart"in g.document.documentElement,m=!!u&&"PointerEvent"in g,A="cropper",C="all",b="crop",v="move",w="zoom",x="e",y="w",B="s",M="n",E="ne",F="nw",S="se",D="sw",k="".concat(A,"-crop"),O="".concat(A,"-disabled"),T="".concat(A,"-hidden"),U="".concat(A,"-hide"),N="".concat(A,"-invisible"),R="".concat(A,"-modal"),P="".concat(A,"-move"),I="".concat(A,"Action"),L="".concat(A,"Preview"),W="crop",j="move",V="none",z="crop",H="cropend",X="cropmove",Y="cropstart",$="dblclick",G=f?"touchstart":"mousedown",q=f?"touchmove":"mousemove",_=f?"touchend touchcancel":"mouseup",Z=m?"pointerdown":G,Q=m?"pointermove":q,J=m?"pointerup pointercancel":_,K="ready",ee="resize",te="wheel",ne="zoom",re="image/jpeg",ie=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,oe=/^data:/,ae=/^data:image\/jpeg;base64,/,se=/^img|canvas$/i,le=200,pe=100,ce={viewMode:0,dragMode:W,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:le,minContainerHeight:pe,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},he='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',de=Number.isNaN||g.isNaN;function ue(e){return"number"===typeof e&&!de(e)}var ge=function(e){return e>0&&e<1/0};function fe(e){return"undefined"===typeof e}function me(e){return"object"===n(e)&&null!==e}var Ae=Object.prototype.hasOwnProperty;function Ce(e){if(!me(e))return!1;try{var t=e.constructor,n=t.prototype;return t&&n&&Ae.call(n,"isPrototypeOf")}catch(r){return!1}}function be(e){return"function"===typeof e}var ve=Array.prototype.slice;function we(e){return Array.from?Array.from(e):ve.call(e)}function xe(e,t){return e&&be(t)&&(Array.isArray(e)||ue(e.length)?we(e).forEach((function(n,r){t.call(e,n,r,e)})):me(e)&&Object.keys(e).forEach((function(n){t.call(e,e[n],n,e)}))),e}var ye=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return me(e)&&n.length>0&&n.forEach((function(t){me(t)&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e},Be=/\.\d*(?:0|9){12}\d*$/;function Me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return Be.test(e)?Math.round(e*t)/t:e}var Ee=/^width|height|left|top|marginLeft|marginTop$/;function Fe(e,t){var n=e.style;xe(t,(function(e,t){Ee.test(t)&&ue(e)&&(e="".concat(e,"px")),n[t]=e}))}function Se(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function De(e,t){if(t)if(ue(e.length))xe(e,(function(e){De(e,t)}));else if(e.classList)e.classList.add(t);else{var n=e.className.trim();n?n.indexOf(t)<0&&(e.className="".concat(n," ").concat(t)):e.className=t}}function ke(e,t){t&&(ue(e.length)?xe(e,(function(e){ke(e,t)})):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function Oe(e,t,n){t&&(ue(e.length)?xe(e,(function(e){Oe(e,t,n)})):n?De(e,t):ke(e,t))}var Te=/([a-z\d])([A-Z])/g;function Ue(e){return e.replace(Te,"$1-$2").toLowerCase()}function Ne(e,t){return me(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(Ue(t)))}function Re(e,t,n){me(n)?e[t]=n:e.dataset?e.dataset[t]=n:e.setAttribute("data-".concat(Ue(t)),n)}function Pe(e,t){if(me(e[t]))try{delete e[t]}catch(n){e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch(n){e.dataset[t]=void 0}else e.removeAttribute("data-".concat(Ue(t)))}var Ie=/\s\s*/,Le=function(){var e=!1;if(u){var t=!1,n=function(){},r=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(e){t=e}});g.addEventListener("test",n,r),g.removeEventListener("test",n,r)}return e}();function We(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n;t.trim().split(Ie).forEach((function(t){if(!Le){var o=e.listeners;o&&o[t]&&o[t][n]&&(i=o[t][n],delete o[t][n],0===Object.keys(o[t]).length&&delete o[t],0===Object.keys(o).length&&delete e.listeners)}e.removeEventListener(t,i,r)}))}function je(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n;t.trim().split(Ie).forEach((function(t){if(r.once&&!Le){var o=e.listeners,a=void 0===o?{}:o;i=function(){delete a[t][n],e.removeEventListener(t,i,r);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];n.apply(e,s)},a[t]||(a[t]={}),a[t][n]&&e.removeEventListener(t,a[t][n],r),a[t][n]=i,e.listeners=a}e.addEventListener(t,i,r)}))}function Ve(e,t,n){var r;return be(Event)&&be(CustomEvent)?r=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(t,!0,!0,n)),e.dispatchEvent(r)}function ze(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var He=g.location,Xe=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Ye(e){var t=e.match(Xe);return null!==t&&(t[1]!==He.protocol||t[2]!==He.hostname||t[3]!==He.port)}function $e(e){var t="timestamp=".concat((new Date).getTime());return e+(-1===e.indexOf("?")?"?":"&")+t}function Ge(e){var t=e.rotate,n=e.scaleX,r=e.scaleY,i=e.translateX,o=e.translateY,a=[];ue(i)&&0!==i&&a.push("translateX(".concat(i,"px)")),ue(o)&&0!==o&&a.push("translateY(".concat(o,"px)")),ue(t)&&0!==t&&a.push("rotate(".concat(t,"deg)")),ue(n)&&1!==n&&a.push("scaleX(".concat(n,")")),ue(r)&&1!==r&&a.push("scaleY(".concat(r,")"));var s=a.length?a.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function qe(e){var n=t({},e),r=0;return xe(e,(function(e,t){delete n[t],xe(n,(function(t){var n=Math.abs(e.startX-t.startX),i=Math.abs(e.startY-t.startY),o=Math.abs(e.endX-t.endX),a=Math.abs(e.endY-t.endY),s=Math.sqrt(n*n+i*i),l=Math.sqrt(o*o+a*a),p=(l-s)/s;Math.abs(p)>Math.abs(r)&&(r=p)}))})),r}function _e(e,n){var r=e.pageX,i=e.pageY,o={endX:r,endY:i};return n?o:t({startX:r,startY:i},o)}function Ze(e){var t=0,n=0,r=0;return xe(e,(function(e){var i=e.startX,o=e.startY;t+=i,n+=o,r+=1})),t/=r,n/=r,{pageX:t,pageY:n}}function Qe(e){var t=e.aspectRatio,n=e.height,r=e.width,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",o=ge(r),a=ge(n);if(o&&a){var s=n*t;"contain"===i&&s>r||"cover"===i&&s<r?n=r/t:r=n*t}else o?n=r/t:a&&(r=n*t);return{width:r,height:n}}function Je(e){var t=e.width,n=e.height,r=e.degree;if(r=Math.abs(r)%180,90===r)return{width:n,height:t};var i=r%90*Math.PI/180,o=Math.sin(i),a=Math.cos(i),s=t*a+n*o,l=t*o+n*a;return r>90?{width:l,height:s}:{width:s,height:l}}function Ke(e,t,n,r){var i=t.aspectRatio,o=t.naturalWidth,a=t.naturalHeight,l=t.rotate,p=void 0===l?0:l,c=t.scaleX,h=void 0===c?1:c,d=t.scaleY,u=void 0===d?1:d,g=n.aspectRatio,f=n.naturalWidth,m=n.naturalHeight,A=r.fillColor,C=void 0===A?"transparent":A,b=r.imageSmoothingEnabled,v=void 0===b||b,w=r.imageSmoothingQuality,x=void 0===w?"low":w,y=r.maxWidth,B=void 0===y?1/0:y,M=r.maxHeight,E=void 0===M?1/0:M,F=r.minWidth,S=void 0===F?0:F,D=r.minHeight,k=void 0===D?0:D,O=document.createElement("canvas"),T=O.getContext("2d"),U=Qe({aspectRatio:g,width:B,height:E}),N=Qe({aspectRatio:g,width:S,height:k},"cover"),R=Math.min(U.width,Math.max(N.width,f)),P=Math.min(U.height,Math.max(N.height,m)),I=Qe({aspectRatio:i,width:B,height:E}),L=Qe({aspectRatio:i,width:S,height:k},"cover"),W=Math.min(I.width,Math.max(L.width,o)),j=Math.min(I.height,Math.max(L.height,a)),V=[-W/2,-j/2,W,j];return O.width=Me(R),O.height=Me(P),T.fillStyle=C,T.fillRect(0,0,R,P),T.save(),T.translate(R/2,P/2),T.rotate(p*Math.PI/180),T.scale(h,u),T.imageSmoothingEnabled=v,T.imageSmoothingQuality=x,T.drawImage.apply(T,[e].concat(s(V.map((function(e){return Math.floor(Me(e))}))))),T.restore(),O}var et=String.fromCharCode;function tt(e,t,n){var r="";n+=t;for(var i=t;i<n;i+=1)r+=et(e.getUint8(i));return r}var nt=/^data:.*,/;function rt(e){var t=e.replace(nt,""),n=atob(t),r=new ArrayBuffer(n.length),i=new Uint8Array(r);return xe(i,(function(e,t){i[t]=n.charCodeAt(t)})),r}function it(e,t){var n=[],r=8192,i=new Uint8Array(e);while(i.length>0)n.push(et.apply(null,we(i.subarray(0,r)))),i=i.subarray(r);return"data:".concat(t,";base64,").concat(btoa(n.join("")))}function ot(e){var t,n=new DataView(e);try{var r,i,o;if(255===n.getUint8(0)&&216===n.getUint8(1)){var a=n.byteLength,s=2;while(s+1<a){if(255===n.getUint8(s)&&225===n.getUint8(s+1)){i=s;break}s+=1}}if(i){var l=i+4,p=i+10;if("Exif"===tt(n,l,4)){var c=n.getUint16(p);if(r=18761===c,(r||19789===c)&&42===n.getUint16(p+2,r)){var h=n.getUint32(p+4,r);h>=8&&(o=p+h)}}}if(o){var d,u,g=n.getUint16(o,r);for(u=0;u<g;u+=1)if(d=o+12*u+2,274===n.getUint16(d,r)){d+=8,t=n.getUint16(d,r),n.setUint16(d,1,r);break}}}catch(f){t=1}return t}function at(e){var t=0,n=1,r=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90,r=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:n,scaleY:r}}var st={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,n=this.container,r=this.cropper,i=Number(t.minContainerWidth),o=Number(t.minContainerHeight);De(r,T),ke(e,T);var a={width:Math.max(n.offsetWidth,i>=0?i:le),height:Math.max(n.offsetHeight,o>=0?o:pe)};this.containerData=a,Fe(r,{width:a.width,height:a.height}),De(e,T),ke(r,T)},initCanvas:function(){var e=this.containerData,t=this.imageData,n=this.options.viewMode,r=Math.abs(t.rotate)%180===90,i=r?t.naturalHeight:t.naturalWidth,o=r?t.naturalWidth:t.naturalHeight,a=i/o,s=e.width,l=e.height;e.height*a>e.width?3===n?s=e.height*a:l=e.width/a:3===n?l=e.width/a:s=e.height*a;var p={aspectRatio:a,naturalWidth:i,naturalHeight:o,width:s,height:l};this.canvasData=p,this.limited=1===n||2===n,this.limitCanvas(!0,!0),p.width=Math.min(Math.max(p.width,p.minWidth),p.maxWidth),p.height=Math.min(Math.max(p.height,p.minHeight),p.maxHeight),p.left=(e.width-p.width)/2,p.top=(e.height-p.height)/2,p.oldLeft=p.left,p.oldTop=p.top,this.initialCanvasData=ye({},p)},limitCanvas:function(e,t){var n=this.options,r=this.containerData,i=this.canvasData,o=this.cropBoxData,a=n.viewMode,s=i.aspectRatio,l=this.cropped&&o;if(e){var p=Number(n.minCanvasWidth)||0,c=Number(n.minCanvasHeight)||0;a>1?(p=Math.max(p,r.width),c=Math.max(c,r.height),3===a&&(c*s>p?p=c*s:c=p/s)):a>0&&(p?p=Math.max(p,l?o.width:0):c?c=Math.max(c,l?o.height:0):l&&(p=o.width,c=o.height,c*s>p?p=c*s:c=p/s));var h=Qe({aspectRatio:s,width:p,height:c});p=h.width,c=h.height,i.minWidth=p,i.minHeight=c,i.maxWidth=1/0,i.maxHeight=1/0}if(t)if(a>(l?0:1)){var d=r.width-i.width,u=r.height-i.height;i.minLeft=Math.min(0,d),i.minTop=Math.min(0,u),i.maxLeft=Math.max(0,d),i.maxTop=Math.max(0,u),l&&this.limited&&(i.minLeft=Math.min(o.left,o.left+(o.width-i.width)),i.minTop=Math.min(o.top,o.top+(o.height-i.height)),i.maxLeft=o.left,i.maxTop=o.top,2===a&&(i.width>=r.width&&(i.minLeft=Math.min(0,d),i.maxLeft=Math.max(0,d)),i.height>=r.height&&(i.minTop=Math.min(0,u),i.maxTop=Math.max(0,u))))}else i.minLeft=-i.width,i.minTop=-i.height,i.maxLeft=r.width,i.maxTop=r.height},renderCanvas:function(e,t){var n=this.canvasData,r=this.imageData;if(t){var i=Je({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),o=i.width,a=i.height,s=n.width*(o/n.naturalWidth),l=n.height*(a/n.naturalHeight);n.left-=(s-n.width)/2,n.top-=(l-n.height)/2,n.width=s,n.height=l,n.aspectRatio=o/a,n.naturalWidth=o,n.naturalHeight=a,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,Fe(this.canvas,ye({width:n.width,height:n.height},Ge({translateX:n.left,translateY:n.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,n=this.imageData,r=n.naturalWidth*(t.width/t.naturalWidth),i=n.naturalHeight*(t.height/t.naturalHeight);ye(n,{width:r,height:i,left:(t.width-r)/2,top:(t.height-i)/2}),Fe(this.image,ye({width:n.width,height:n.height},Ge(ye({translateX:n.left,translateY:n.top},n)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,n=e.aspectRatio||e.initialAspectRatio,r=Number(e.autoCropArea)||.8,i={width:t.width,height:t.height};n&&(t.height*n>t.width?i.height=i.width/n:i.width=i.height*n),this.cropBoxData=i,this.limitCropBox(!0,!0),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),i.width=Math.max(i.minWidth,i.width*r),i.height=Math.max(i.minHeight,i.height*r),i.left=t.left+(t.width-i.width)/2,i.top=t.top+(t.height-i.height)/2,i.oldLeft=i.left,i.oldTop=i.top,this.initialCropBoxData=ye({},i)},limitCropBox:function(e,t){var n=this.options,r=this.containerData,i=this.canvasData,o=this.cropBoxData,a=this.limited,s=n.aspectRatio;if(e){var l=Number(n.minCropBoxWidth)||0,p=Number(n.minCropBoxHeight)||0,c=a?Math.min(r.width,i.width,i.width+i.left,r.width-i.left):r.width,h=a?Math.min(r.height,i.height,i.height+i.top,r.height-i.top):r.height;l=Math.min(l,r.width),p=Math.min(p,r.height),s&&(l&&p?p*s>l?p=l/s:l=p*s:l?p=l/s:p&&(l=p*s),h*s>c?h=c/s:c=h*s),o.minWidth=Math.min(l,c),o.minHeight=Math.min(p,h),o.maxWidth=c,o.maxHeight=h}t&&(a?(o.minLeft=Math.max(0,i.left),o.minTop=Math.max(0,i.top),o.maxLeft=Math.min(r.width,i.left+i.width)-o.width,o.maxTop=Math.min(r.height,i.top+i.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=r.width-o.width,o.maxTop=r.height-o.height))},renderCropBox:function(){var e=this.options,t=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,e.movable&&e.cropBoxMovable&&Re(this.face,I,n.width>=t.width&&n.height>=t.height?v:C),Fe(this.cropBox,ye({width:n.width,height:n.height},Ge({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ve(this.element,z,this.getData())}},lt={initPreview:function(){var e=this.element,t=this.crossOrigin,n=this.options.preview,r=t?this.crossOriginUrl:this.url,i=e.alt||"The image to preview",o=document.createElement("img");if(t&&(o.crossOrigin=t),o.src=r,o.alt=i,this.viewBox.appendChild(o),this.viewBoxImage=o,n){var a=n;"string"===typeof n?a=e.ownerDocument.querySelectorAll(n):n.querySelector&&(a=[n]),this.previews=a,xe(a,(function(e){var n=document.createElement("img");Re(e,L,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),t&&(n.crossOrigin=t),n.src=r,n.alt=i,n.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',e.innerHTML="",e.appendChild(n)}))}},resetPreview:function(){xe(this.previews,(function(e){var t=Ne(e,L);Fe(e,{width:t.width,height:t.height}),e.innerHTML=t.html,Pe(e,L)}))},preview:function(){var e=this.imageData,t=this.canvasData,n=this.cropBoxData,r=n.width,i=n.height,o=e.width,a=e.height,s=n.left-t.left-e.left,l=n.top-t.top-e.top;this.cropped&&!this.disabled&&(Fe(this.viewBoxImage,ye({width:o,height:a},Ge(ye({translateX:-s,translateY:-l},e)))),xe(this.previews,(function(t){var n=Ne(t,L),p=n.width,c=n.height,h=p,d=c,u=1;r&&(u=p/r,d=i*u),i&&d>c&&(u=c/i,h=r*u,d=c),Fe(t,{width:h,height:d}),Fe(t.getElementsByTagName("img")[0],ye({width:o*u,height:a*u},Ge(ye({translateX:-s*u,translateY:-l*u},e))))})))}},pt={bind:function(){var e=this.element,t=this.options,n=this.cropper;be(t.cropstart)&&je(e,Y,t.cropstart),be(t.cropmove)&&je(e,X,t.cropmove),be(t.cropend)&&je(e,H,t.cropend),be(t.crop)&&je(e,z,t.crop),be(t.zoom)&&je(e,ne,t.zoom),je(n,Z,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&je(n,te,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&je(n,$,this.onDblclick=this.dblclick.bind(this)),je(e.ownerDocument,Q,this.onCropMove=this.cropMove.bind(this)),je(e.ownerDocument,J,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&je(window,ee,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,n=this.cropper;be(t.cropstart)&&We(e,Y,t.cropstart),be(t.cropmove)&&We(e,X,t.cropmove),be(t.cropend)&&We(e,H,t.cropend),be(t.crop)&&We(e,z,t.crop),be(t.zoom)&&We(e,ne,t.zoom),We(n,Z,this.onCropStart),t.zoomable&&t.zoomOnWheel&&We(n,te,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&We(n,$,this.onDblclick),We(e.ownerDocument,Q,this.onCropMove),We(e.ownerDocument,J,this.onCropEnd),t.responsive&&We(window,ee,this.onResize)}},ct={resize:function(){if(!this.disabled){var e,t,n=this.options,r=this.container,i=this.containerData,o=r.offsetWidth/i.width,a=r.offsetHeight/i.height,s=Math.abs(o-1)>Math.abs(a-1)?o:a;if(1!==s)n.restore&&(e=this.getCanvasData(),t=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(xe(e,(function(t,n){e[n]=t*s}))),this.setCropBoxData(xe(t,(function(e,n){t[n]=e*s}))))}},dblclick:function(){this.disabled||this.options.dragMode===V||this.setDragMode(Se(this.dragBox,k)?j:W)},wheel:function(e){var t=this,n=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(e.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){t.wheeling=!1}),50),e.deltaY?r=e.deltaY>0?1:-1:e.wheelDelta?r=-e.wheelDelta/120:e.detail&&(r=e.detail>0?1:-1),this.zoom(-r*n,e)))},cropStart:function(e){var t=e.buttons,n=e.button;if(!(this.disabled||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(ue(t)&&1!==t||ue(n)&&0!==n||e.ctrlKey))){var r,i=this.options,o=this.pointers;e.changedTouches?xe(e.changedTouches,(function(e){o[e.identifier]=_e(e)})):o[e.pointerId||0]=_e(e),r=Object.keys(o).length>1&&i.zoomable&&i.zoomOnTouch?w:Ne(e.target,I),ie.test(r)&&!1!==Ve(this.element,Y,{originalEvent:e,action:r})&&(e.preventDefault(),this.action=r,this.cropping=!1,r===b&&(this.cropping=!0,De(this.dragBox,R)))}},cropMove:function(e){var t=this.action;if(!this.disabled&&t){var n=this.pointers;e.preventDefault(),!1!==Ve(this.element,X,{originalEvent:e,action:t})&&(e.changedTouches?xe(e.changedTouches,(function(e){ye(n[e.identifier]||{},_e(e,!0))})):ye(n[e.pointerId||0]||{},_e(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,n=this.pointers;e.changedTouches?xe(e.changedTouches,(function(e){delete n[e.identifier]})):delete n[e.pointerId||0],t&&(e.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,Oe(this.dragBox,R,this.cropped&&this.options.modal)),Ve(this.element,H,{originalEvent:e,action:t}))}}},ht={change:function(e){var t,n=this.options,r=this.canvasData,i=this.containerData,o=this.cropBoxData,a=this.pointers,s=this.action,l=n.aspectRatio,p=o.left,c=o.top,h=o.width,d=o.height,u=p+h,g=c+d,f=0,m=0,A=i.width,k=i.height,O=!0;!l&&e.shiftKey&&(l=h&&d?h/d:1),this.limited&&(f=o.minLeft,m=o.minTop,A=f+Math.min(i.width,r.width,r.left+r.width),k=m+Math.min(i.height,r.height,r.top+r.height));var U=a[Object.keys(a)[0]],N={x:U.endX-U.startX,y:U.endY-U.startY},R=function(e){switch(e){case x:u+N.x>A&&(N.x=A-u);break;case y:p+N.x<f&&(N.x=f-p);break;case M:c+N.y<m&&(N.y=m-c);break;case B:g+N.y>k&&(N.y=k-g);break}};switch(s){case C:p+=N.x,c+=N.y;break;case x:if(N.x>=0&&(u>=A||l&&(c<=m||g>=k))){O=!1;break}R(x),h+=N.x,h<0&&(s=y,h=-h,p-=h),l&&(d=h/l,c+=(o.height-d)/2);break;case M:if(N.y<=0&&(c<=m||l&&(p<=f||u>=A))){O=!1;break}R(M),d-=N.y,c+=N.y,d<0&&(s=B,d=-d,c-=d),l&&(h=d*l,p+=(o.width-h)/2);break;case y:if(N.x<=0&&(p<=f||l&&(c<=m||g>=k))){O=!1;break}R(y),h-=N.x,p+=N.x,h<0&&(s=x,h=-h,p-=h),l&&(d=h/l,c+=(o.height-d)/2);break;case B:if(N.y>=0&&(g>=k||l&&(p<=f||u>=A))){O=!1;break}R(B),d+=N.y,d<0&&(s=M,d=-d,c-=d),l&&(h=d*l,p+=(o.width-h)/2);break;case E:if(l){if(N.y<=0&&(c<=m||u>=A)){O=!1;break}R(M),d-=N.y,c+=N.y,h=d*l}else R(M),R(x),N.x>=0?u<A?h+=N.x:N.y<=0&&c<=m&&(O=!1):h+=N.x,N.y<=0?c>m&&(d-=N.y,c+=N.y):(d-=N.y,c+=N.y);h<0&&d<0?(s=D,d=-d,h=-h,c-=d,p-=h):h<0?(s=F,h=-h,p-=h):d<0&&(s=S,d=-d,c-=d);break;case F:if(l){if(N.y<=0&&(c<=m||p<=f)){O=!1;break}R(M),d-=N.y,c+=N.y,h=d*l,p+=o.width-h}else R(M),R(y),N.x<=0?p>f?(h-=N.x,p+=N.x):N.y<=0&&c<=m&&(O=!1):(h-=N.x,p+=N.x),N.y<=0?c>m&&(d-=N.y,c+=N.y):(d-=N.y,c+=N.y);h<0&&d<0?(s=S,d=-d,h=-h,c-=d,p-=h):h<0?(s=E,h=-h,p-=h):d<0&&(s=D,d=-d,c-=d);break;case D:if(l){if(N.x<=0&&(p<=f||g>=k)){O=!1;break}R(y),h-=N.x,p+=N.x,d=h/l}else R(B),R(y),N.x<=0?p>f?(h-=N.x,p+=N.x):N.y>=0&&g>=k&&(O=!1):(h-=N.x,p+=N.x),N.y>=0?g<k&&(d+=N.y):d+=N.y;h<0&&d<0?(s=E,d=-d,h=-h,c-=d,p-=h):h<0?(s=S,h=-h,p-=h):d<0&&(s=F,d=-d,c-=d);break;case S:if(l){if(N.x>=0&&(u>=A||g>=k)){O=!1;break}R(x),h+=N.x,d=h/l}else R(B),R(x),N.x>=0?u<A?h+=N.x:N.y>=0&&g>=k&&(O=!1):h+=N.x,N.y>=0?g<k&&(d+=N.y):d+=N.y;h<0&&d<0?(s=F,d=-d,h=-h,c-=d,p-=h):h<0?(s=D,h=-h,p-=h):d<0&&(s=E,d=-d,c-=d);break;case v:this.move(N.x,N.y),O=!1;break;case w:this.zoom(qe(a),e),O=!1;break;case b:if(!N.x||!N.y){O=!1;break}t=ze(this.cropper),p=U.startX-t.left,c=U.startY-t.top,h=o.minWidth,d=o.minHeight,N.x>0?s=N.y>0?S:E:N.x<0&&(p-=h,s=N.y>0?D:F),N.y<0&&(c-=d),this.cropped||(ke(this.cropBox,T),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}O&&(o.width=h,o.height=d,o.left=p,o.top=c,this.action=s,this.renderCropBox()),xe(a,(function(e){e.startX=e.endX,e.startY=e.endY}))}},dt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&De(this.dragBox,R),ke(this.cropBox,T),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=ye({},this.initialImageData),this.canvasData=ye({},this.initialCanvasData),this.cropBoxData=ye({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(ye(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),ke(this.dragBox,R),De(this.cropBox,T)),this},replace:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,xe(this.previews,(function(t){t.getElementsByTagName("img")[0].src=e})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,ke(this.cropper,O)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,De(this.cropper,O)),this},destroy:function(){var e=this.element;return e[A]?(e[A]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,r=n.left,i=n.top;return this.moveTo(fe(e)?e:r+Number(e),fe(t)?t:i+Number(t))},moveTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.canvasData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(ue(e)&&(n.left=e,r=!0),ue(t)&&(n.top=t,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(e,t){var n=this.canvasData;return e=Number(e),e=e<0?1/(1-e):1+e,this.zoomTo(n.width*e/n.naturalWidth,null,t)},zoomTo:function(e,t,n){var r=this.options,i=this.canvasData,o=i.width,a=i.height,s=i.naturalWidth,l=i.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&r.zoomable){var p=s*e,c=l*e;if(!1===Ve(this.element,ne,{ratio:e,oldRatio:o/s,originalEvent:n}))return this;if(n){var h=this.pointers,d=ze(this.cropper),u=h&&Object.keys(h).length?Ze(h):{pageX:n.pageX,pageY:n.pageY};i.left-=(p-o)*((u.pageX-d.left-i.left)/o),i.top-=(c-a)*((u.pageY-d.top-i.top)/a)}else Ce(t)&&ue(t.x)&&ue(t.y)?(i.left-=(p-o)*((t.x-i.left)/o),i.top-=(c-a)*((t.y-i.top)/a)):(i.left-=(p-o)/2,i.top-=(c-a)/2);i.width=p,i.height=c,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),ue(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,ue(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(ue(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.imageData,r=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(ue(e)&&(n.scaleX=e,r=!0),ue(t)&&(n.scaleY=t,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.options,r=this.imageData,i=this.canvasData,o=this.cropBoxData;if(this.ready&&this.cropped){e={x:o.left-i.left,y:o.top-i.top,width:o.width,height:o.height};var a=r.width/r.naturalWidth;if(xe(e,(function(t,n){e[n]=t/a})),t){var s=Math.round(e.y+e.height),l=Math.round(e.x+e.width);e.x=Math.round(e.x),e.y=Math.round(e.y),e.width=l-e.x,e.height=s-e.y}}else e={x:0,y:0,width:0,height:0};return n.rotatable&&(e.rotate=r.rotate||0),n.scalable&&(e.scaleX=r.scaleX||1,e.scaleY=r.scaleY||1),e},setData:function(e){var t=this.options,n=this.imageData,r=this.canvasData,i={};if(this.ready&&!this.disabled&&Ce(e)){var o=!1;t.rotatable&&ue(e.rotate)&&e.rotate!==n.rotate&&(n.rotate=e.rotate,o=!0),t.scalable&&(ue(e.scaleX)&&e.scaleX!==n.scaleX&&(n.scaleX=e.scaleX,o=!0),ue(e.scaleY)&&e.scaleY!==n.scaleY&&(n.scaleY=e.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var a=n.width/n.naturalWidth;ue(e.x)&&(i.left=e.x*a+r.left),ue(e.y)&&(i.top=e.y*a+r.top),ue(e.width)&&(i.width=e.width*a),ue(e.height)&&(i.height=e.height*a),this.setCropBoxData(i)}return this},getContainerData:function(){return this.ready?ye({},this.containerData):{}},getImageData:function(){return this.sized?ye({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&xe(["left","top","width","height","naturalWidth","naturalHeight"],(function(n){t[n]=e[n]})),t},setCanvasData:function(e){var t=this.canvasData,n=t.aspectRatio;return this.ready&&!this.disabled&&Ce(e)&&(ue(e.left)&&(t.left=e.left),ue(e.top)&&(t.top=e.top),ue(e.width)?(t.width=e.width,t.height=e.width/n):ue(e.height)&&(t.height=e.height,t.width=e.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var e,t=this.cropBoxData;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(e){var t,n,r=this.cropBoxData,i=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&Ce(e)&&(ue(e.left)&&(r.left=e.left),ue(e.top)&&(r.top=e.top),ue(e.width)&&e.width!==r.width&&(t=!0,r.width=e.width),ue(e.height)&&e.height!==r.height&&(n=!0,r.height=e.height),i&&(t?r.height=r.width/i:n&&(r.width=r.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,n=Ke(this.image,this.imageData,t,e);if(!this.cropped)return n;var r=this.getData(),i=r.x,o=r.y,a=r.width,l=r.height,p=n.width/Math.floor(t.naturalWidth);1!==p&&(i*=p,o*=p,a*=p,l*=p);var c=a/l,h=Qe({aspectRatio:c,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),d=Qe({aspectRatio:c,width:e.minWidth||0,height:e.minHeight||0},"cover"),u=Qe({aspectRatio:c,width:e.width||(1!==p?n.width:a),height:e.height||(1!==p?n.height:l)}),g=u.width,f=u.height;g=Math.min(h.width,Math.max(d.width,g)),f=Math.min(h.height,Math.max(d.height,f));var m=document.createElement("canvas"),A=m.getContext("2d");m.width=Me(g),m.height=Me(f),A.fillStyle=e.fillColor||"transparent",A.fillRect(0,0,g,f);var C=e.imageSmoothingEnabled,b=void 0===C||C,v=e.imageSmoothingQuality;A.imageSmoothingEnabled=b,v&&(A.imageSmoothingQuality=v);var w,x,y,B,M,E,F=n.width,S=n.height,D=i,k=o;D<=-a||D>F?(D=0,w=0,y=0,M=0):D<=0?(y=-D,D=0,w=Math.min(F,a+D),M=w):D<=F&&(y=0,w=Math.min(a,F-D),M=w),w<=0||k<=-l||k>S?(k=0,x=0,B=0,E=0):k<=0?(B=-k,k=0,x=Math.min(S,l+k),E=x):k<=S&&(B=0,x=Math.min(l,S-k),E=x);var O=[D,k,w,x];if(M>0&&E>0){var T=g/a;O.push(y*T,B*T,M*T,E*T)}return A.drawImage.apply(A,[n].concat(s(O.map((function(e){return Math.floor(Me(e))}))))),m},setAspectRatio:function(e){var t=this.options;return this.disabled||fe(e)||(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,n=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var i=e===W,o=t.movable&&e===j;e=i||o?e:V,t.dragMode=e,Re(n,I,e),Oe(n,k,i),Oe(n,P,o),t.cropBoxMovable||(Re(r,I,e),Oe(r,k,i),Oe(r,P,o))}return this}},ut=g.Cropper,gt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r(this,e),!t||!se.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=ye({},ce,Ce(n)&&n),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return o(e,[{key:"init",value:function(){var e,t=this.element,n=t.tagName.toLowerCase();if(!t[A]){if(t[A]=this,"img"===n){if(this.isImg=!0,e=t.getAttribute("src")||"",this.originalUrl=e,!e)return;e=t.src}else"canvas"===n&&window.HTMLCanvasElement&&(e=t.toDataURL());this.load(e)}}},{key:"load",value:function(e){var t=this;if(e){this.url=e,this.imageData={};var n=this.element,r=this.options;if(r.rotatable||r.scalable||(r.checkOrientation=!1),r.checkOrientation&&window.ArrayBuffer)if(oe.test(e))ae.test(e)?this.read(rt(e)):this.clone();else{var i=new XMLHttpRequest,o=this.clone.bind(this);this.reloading=!0,this.xhr=i,i.onabort=o,i.onerror=o,i.ontimeout=o,i.onprogress=function(){i.getResponseHeader("content-type")!==re&&i.abort()},i.onload=function(){t.read(i.response)},i.onloadend=function(){t.reloading=!1,t.xhr=null},r.checkCrossOrigin&&Ye(e)&&n.crossOrigin&&(e=$e(e)),i.open("GET",e,!0),i.responseType="arraybuffer",i.withCredentials="use-credentials"===n.crossOrigin,i.send()}else this.clone()}}},{key:"read",value:function(e){var t=this.options,n=this.imageData,r=ot(e),i=0,o=1,a=1;if(r>1){this.url=it(e,re);var s=at(r);i=s.rotate,o=s.scaleX,a=s.scaleY}t.rotatable&&(n.rotate=i),t.scalable&&(n.scaleX=o,n.scaleY=a),this.clone()}},{key:"clone",value:function(){var e=this.element,t=this.url,n=e.crossOrigin,r=t;this.options.checkCrossOrigin&&Ye(t)&&(n||(n="anonymous"),r=$e(t)),this.crossOrigin=n,this.crossOriginUrl=r;var i=document.createElement("img");n&&(i.crossOrigin=n),i.src=r||t,i.alt=e.alt||"The image to crop",this.image=i,i.onload=this.start.bind(this),i.onerror=this.stop.bind(this),De(i,U),e.parentNode.insertBefore(i,e.nextSibling)}},{key:"start",value:function(){var e=this,t=this.image;t.onload=null,t.onerror=null,this.sizing=!0;var n=g.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(g.navigator.userAgent),r=function(t,n){ye(e.imageData,{naturalWidth:t,naturalHeight:n,aspectRatio:t/n}),e.initialImageData=ye({},e.imageData),e.sizing=!1,e.sized=!0,e.build()};if(!t.naturalWidth||n){var i=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=i,i.onload=function(){r(i.width,i.height),n||o.removeChild(i)},i.src=t.src,n||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(i))}else r(t.naturalWidth,t.naturalHeight)}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var e=this.element,t=this.options,n=this.image,r=e.parentNode,i=document.createElement("div");i.innerHTML=he;var o=i.querySelector(".".concat(A,"-container")),a=o.querySelector(".".concat(A,"-canvas")),s=o.querySelector(".".concat(A,"-drag-box")),l=o.querySelector(".".concat(A,"-crop-box")),p=l.querySelector(".".concat(A,"-face"));this.container=r,this.cropper=o,this.canvas=a,this.dragBox=s,this.cropBox=l,this.viewBox=o.querySelector(".".concat(A,"-view-box")),this.face=p,a.appendChild(n),De(e,T),r.insertBefore(o,e.nextSibling),this.isImg||ke(n,U),this.initPreview(),this.bind(),t.initialAspectRatio=Math.max(0,t.initialAspectRatio)||NaN,t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,De(l,T),t.guides||De(l.getElementsByClassName("".concat(A,"-dashed")),T),t.center||De(l.getElementsByClassName("".concat(A,"-center")),T),t.background&&De(o,"".concat(A,"-bg")),t.highlight||De(p,N),t.cropBoxMovable&&(De(p,P),Re(p,I,C)),t.cropBoxResizable||(De(l.getElementsByClassName("".concat(A,"-line")),T),De(l.getElementsByClassName("".concat(A,"-point")),T)),this.render(),this.ready=!0,this.setDragMode(t.dragMode),t.autoCrop&&this.crop(),this.setData(t.data),be(t.ready)&&je(e,K,t.ready,{once:!0}),Ve(e,K)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),ke(this.element,T))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=ut,e}},{key:"setDefaults",value:function(e){ye(ce,Ce(e)&&e)}}]),e}();return ye(gt.prototype,st,lt,pt,ct,ht,dt),gt}))},977:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(537),i=n.n(r),o=n(645),a=n.n(o),s=a()(i());s.push([e.id,".cropper[data-v-642381ed] .el-dialog__body{padding:0}.cropper_main[data-v-642381ed]{height:50vh;min-height:500px}.cropper_actions[data-v-642381ed]{padding:.5em}.cropper_actions[data-v-642381ed] .el-button-group{margin-right:10px}","",{version:3,sources:["webpack://./../../uploader.vue"],names:[],mappings:"AAshBA,2CACE,SACF,CAEA,+BACE,WAAY,CACZ,gBACF,CAEA,kCACE,YACF,CAEA,mDACE,iBACF",sourcesContent:['<template>\r\n  <el-upload\r\n    ref="myupload"\r\n    v-bind="$attrs"\r\n    action\r\n    :fileList="fileListFinnal"\r\n    :accept="acceptFinnal"\r\n    :before-upload="handleBeforeUpload"\r\n    :on-exceed="handleonExceed"\r\n    :on-change="handleChange"\r\n    :on-remove="handleRemove"\r\n    :http-request="customUpload"\r\n  >\r\n    <div :id="triggerId">\r\n      <slot name="default">\r\n        <el-button>点击上传</el-button>\r\n      </slot>\r\n      <slot name="trigger"></slot>\r\n      <slot name="tip"></slot>\r\n    </div>\r\n    \x3c!-- edit dialog --\x3e\r\n    <el-dialog\r\n      v-model="dialogVisible"\r\n      append-to-body\r\n      title="图像剪裁"\r\n      top="10vh"\r\n      custom-class="cropper"\r\n      :close-on-click-modal="false"\r\n      :close-on-press-escape="false"\r\n      @close="cropperMethod(\'close\')"\r\n    >\r\n      <div class="cropper_main">\r\n        <img src ref="CropperImg" />\r\n      </div>\r\n      <div class="cropper_actions flex-row align-center">\r\n        <div class="flex-1">\r\n          <el-button-group>\r\n            <el-button\r\n              size="small"\r\n              title="左旋"\r\n              @click="cropperMethod(\'rotateLeft\')"\r\n            >\r\n              <i class="el-icon-refresh-left"></i>\r\n              左旋\r\n            </el-button>\r\n            <el-button\r\n              size="small"\r\n              title="右旋"\r\n              @click="cropperMethod(\'rotateRight\')"\r\n            >\r\n              <i class="el-icon-refresh-right"></i>\r\n              右旋\r\n            </el-button>\r\n          </el-button-group>\r\n          <el-button-group>\r\n            <el-button\r\n              size="small"\r\n              title="水平镜像"\r\n              @click="cropperMethod(\'scaleX\')"\r\n            >\r\n              <i class="el-icon-sort" style="transform: rotateZ(90deg)"></i>\r\n              水平镜像\r\n            </el-button>\r\n            <el-button\r\n              size="small"\r\n              title="垂直镜像"\r\n              @click="cropperMethod(\'scaleY\')"\r\n            >\r\n              <i class="el-icon-sort"></i>\r\n              垂直镜像\r\n            </el-button>\r\n          </el-button-group>\r\n          <el-button-group>\r\n            <el-button\r\n              size="small"\r\n              title="重置"\r\n              @click="cropperMethod(\'reset\')"\r\n            >\r\n              <i class="el-icon-refresh"></i>\r\n              重置\r\n            </el-button>\r\n          </el-button-group>\r\n        </div>\r\n\r\n        <el-button\r\n          size="small"\r\n          type="primary"\r\n          plain\r\n          @click="cropperMethod(\'save\')"\r\n        >\r\n          <i class="el-icon-crop"></i>\r\n          确定\r\n        </el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </el-upload>\r\n</template>\r\n<script setup>\r\nimport { getCurrentInstance, defineProps } from "vue";\r\nconst internalInstance = getCurrentInstance();\r\n\r\nconst globalOption =\r\n  internalInstance.appContext.config.globalProperties.$UploaderOption || {};\r\nconst getDefaultValue = function (key) {\r\n  if (Object.keys(globalOption).indexOf(key) !== -1) {\r\n    return globalOption[key];\r\n  }\r\n  return internalInstance.props[key];\r\n};\r\n\r\n/**\r\n * 通过文件类型获取扩展名列表\r\n * @param type[String] FileTypeMap 中约定的类型名\r\n * return[Array] 目标类型的扩展名数组\r\n * */\r\nconst getExtByType = (type) => {\r\n  const quickType = Object.assign(\r\n    {},\r\n    FileTypeMap,\r\n    globalOption.quickType || {}\r\n  );\r\n  if (type && Array.isArray(quickType[type])) {\r\n    let classList = [];\r\n    let extList = [];\r\n    quickType[type].forEach((e) => {\r\n      if (e.indexOf("t-") === 0) {\r\n        classList.push(e);\r\n      } else {\r\n        extList.push(e);\r\n      }\r\n    });\r\n    if (classList.length) {\r\n      classList.forEach((classType) => {\r\n        extList = extList.concat(getExtByType(classType));\r\n      });\r\n    }\r\n    return extList;\r\n  } else if (type && type.split) {\r\n    return [type.toLowerCase()];\r\n  }\r\n};\r\n<\/script>\r\n\r\n<script>\r\nimport { fixImgFile } from "ios-photo-repair";\r\nimport Cropper from "cropperjs";\r\nimport "cropperjs/dist/cropper.css";\r\n\r\nlet cropperInstance;\r\n\r\n// 调试开关\r\nconst DEBUG = process.env.NODE_ENV === "development";\r\n\r\n// 图片压缩成jpg格式\r\nconst fixJpgFileName = function (fileName) {\r\n  if (fileName.match(/\\.jpg|\\.jpeg$/)) {\r\n    return fileName;\r\n  }\r\n  return fileName + ".jpg";\r\n};\r\n\r\n// 文件类型集合\r\nconst FileTypeMap = {\r\n  "t-image": [".jpg", ".jpeg", ".png", ".gif", ".bmp", ".webp"],\r\n  "t-video": [".mp4", ".rmvb", ".avi", ".mov", ".3gp", ".webm"],\r\n  "t-audio": [".wav", ".mp3", ".ogg", ".acc"],\r\n  "t-word": [".docx", ".doc"],\r\n  "t-excel": [".xlsx", ".xls"],\r\n  "t-ppt": [".ppt", ".pptx"],\r\n  "t-document": [".pdf", "t-word", "t-excel", "t-ppt"],\r\n  "t-zip": [".zip", ".rar"],\r\n};\r\n\r\n/**\r\n * 预先从全局用户配置中获取props默认值\r\n * @param key[String] prop的key\r\n * @param defaultValue[Any] 组件内置默认值\r\n * return[Any] props.key的最终默认值\r\n */\r\n\r\nexport default {\r\n  props: {\r\n    modelValue: {\r\n      type: Array,\r\n      required: false,\r\n      default() {\r\n        return [];\r\n      },\r\n    },\r\n    triggerId: {\r\n      // 配合实现富文本插件上传功能\r\n      type: String,\r\n      required: false,\r\n      default: "upload_image_trigger" + parseInt(Math.random() * 1e8),\r\n    },\r\n    limitSize: {\r\n      // 文件尺寸限制\r\n      type: Number,\r\n      required: false,\r\n      default() {\r\n        return 100 * 1024 * 1024;\r\n      },\r\n    },\r\n    imgCompress: {\r\n      // 开启图片压缩\r\n      type: Boolean,\r\n      required: false,\r\n      default() {\r\n        return true;\r\n      },\r\n    },\r\n    imgCompressOption: {\r\n      // 图片压缩配置\r\n      type: Object,\r\n      required: false,\r\n      default() {\r\n        return {\r\n          maxWidth: 1000,\r\n          maxHeight: 1000,\r\n        };\r\n      },\r\n    },\r\n    imgCrop: {\r\n      // 开启图片剪裁\r\n      type: Boolean,\r\n      required: false,\r\n      default() {\r\n        return false;\r\n      },\r\n    },\r\n    imgCropOption: {\r\n      // 图片剪裁配置\r\n      type: Object,\r\n      required: false,\r\n      default() {\r\n        return {\r\n          ratio: 1,\r\n          minWidth: 0,\r\n          minHeight: 0,\r\n          maxWidth: 1000,\r\n          maxHeight: 1000,\r\n        };\r\n      },\r\n    },\r\n    uploadMethod: {\r\n      // 自定义上传方法，参数（file/blob, fileName）\r\n      type: Function,\r\n      required: false,\r\n    },\r\n    responseTransfer: {\r\n      // 接口返回数据 与 fileList 数据格式转换函数\r\n      type: Function,\r\n      required: false,\r\n      default(response) {\r\n        return response;\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      cropResult: null,\r\n      fileListFinnal: [],\r\n      controller: null,\r\n    };\r\n  },\r\n  computed: {\r\n    acceptFinnal() {\r\n      if (this.$attrs.accept && this.$attrs.accept.indexOf("t-") !== -1) {\r\n        const typeArray = this.$attrs.accept.split(",");\r\n        let result = [];\r\n        typeArray.forEach((type) => {\r\n          result = result.concat(this.getExtByType(type));\r\n        });\r\n        return result.join(",");\r\n      } else {\r\n        return this.$attrs.accept || "*";\r\n      }\r\n    },\r\n    propsFinnal() {\r\n      let result = {};\r\n      Object.keys(this.$props).forEach((prop) => {\r\n        result[prop] = this.getDefaultValue(prop);\r\n      });\r\n      return result;\r\n    },\r\n  },\r\n  watch: {\r\n    modelValue: {\r\n      handler(newValue) {\r\n        this.fileListFinnal = this.$attrs.fileList || newValue || [];\r\n        if (this.$refs.myupload) {\r\n          this.$refs.myupload.uploadFiles = newValue.filter((ef) => {\r\n            return newValue.findIndex((f) => f.uid === ef.uid) !== -1;\r\n          });\r\n        }\r\n      },\r\n      deep: true,\r\n      immediate: true,\r\n    },\r\n  },\r\n  methods: {\r\n    handleBeforeUpload: function (file) {\r\n      // 尺寸校验\r\n      if (file.size > this.propsFinnal.limitSize) {\r\n        Vue.prototype.$message.warning("文件大小超出限制");\r\n        return false;\r\n      }\r\n      // 格式校验\r\n      if (\r\n        this.acceptFinnal !== "*" &&\r\n        this.acceptFinnal.indexOf(\r\n          file.name.substring(file.name.lastIndexOf(".")).toLowerCase()\r\n        ) === -1\r\n      ) {\r\n        Vue.prototype.$message.warning("文件格式不正确");\r\n        return false;\r\n      }\r\n\r\n      if (typeof this.$attrs["before-upload"] === "function") {\r\n        return this.$attrs["before-upload"](file);\r\n      } else if (\r\n        this.globalOption &&\r\n        typeof this.globalOption.beforeUpload === "function"\r\n      ) {\r\n        return this.globalOption.beforeUpload(file);\r\n      } else {\r\n        return true;\r\n      }\r\n    },\r\n    handleonExceed: function (file, fileList) {\r\n      if (typeof this.$attrs["on-exceed"] === "function") {\r\n        this.$attrs["on-exceed"](file, fileList);\r\n      } else if (\r\n        this.globalOption &&\r\n        typeof this.globalOption.onExceed === "function"\r\n      ) {\r\n        this.globalOption.onExceed(file, fileList);\r\n      }\r\n    },\r\n    handleChange: function (file, fileList) {\r\n      const doneFiles = fileList.filter((e) => e.status === "success");\r\n      if (doneFiles.length === fileList.length) {\r\n        this.$emit(\r\n          "update:modelValue",\r\n          doneFiles.map((e) => {\r\n            let data = e.response\r\n              ? this.propsFinnal.responseTransfer(e.response)\r\n              : e;\r\n            // 扩展字段\r\n            data.uid = e.uid;\r\n            data.status = e.status;\r\n            return data;\r\n          })\r\n        );\r\n      }\r\n\r\n      if (typeof this.$attrs["on-change"] === "function") {\r\n        this.$attrs["on-change"](file, fileList);\r\n      }\r\n    },\r\n    handleProgress(e) {\r\n      if (typeof this.$attrs["on-progress"] === "function") {\r\n        if (e.total > 0) {\r\n          e.percent = (e.loaded / e.total) * 100;\r\n        }\r\n        this.$attrs["on-progress"](e);\r\n      }\r\n    },\r\n    handleRemove: function (file, fileList) {\r\n      this.$emit(\r\n        "update:modelValue",\r\n        fileList.map((e) => {\r\n          let data = e.response\r\n            ? this.propsFinnal.responseTransfer(e.response)\r\n            : e;\r\n          data.uid = e.uid;\r\n          return data;\r\n        })\r\n      );\r\n\r\n      if (typeof this.$attrs["on-remove"] === "function") {\r\n        this.$attrs["on-remove"](file, fileList);\r\n      }\r\n    },\r\n    customUpload: async function (params) {\r\n      if (\r\n        !this.globalOption &&\r\n        !this.globalOption.uploadMethod &&\r\n        !this.propsFinnal.uploadMethod\r\n      ) {\r\n        return console.warn(\r\n          "Uploader: The required configuration [uploadMethod] is missing!"\r\n        );\r\n      }\r\n\r\n      const theUploadRequest =\r\n        this.propsFinnal.uploadMethod || this.globalOption.uploadMethod;\r\n      if (typeof theUploadRequest !== "function") {\r\n        return console.warn("Uploader: [uploadMethod] must be a Function!");\r\n      }\r\n\r\n      const uploadedFileType = params.file.type;\r\n      DEBUG && console.log("uploadedFileType", uploadedFileType);\r\n\r\n      let formDataFileObj = params.file;\r\n      let formDataFileName = params.file.name;\r\n\r\n      if (uploadedFileType.indexOf("image/") === 0) {\r\n        if (this.propsFinnal.imgCrop) {\r\n          // 图片剪裁\r\n          this.cropResult = null;\r\n          this.dialogVisible = true;\r\n\r\n          const imgBlob = await new Promise((resolve) => {\r\n            let oReader = new FileReader();\r\n            oReader.onload = (e) => {\r\n              let base64 = e.target.result;\r\n              let img = this.$refs.CropperImg;\r\n              img.src = base64;\r\n              //\r\n              if (cropperInstance) {\r\n                cropperInstance.destroy();\r\n              }\r\n\r\n              cropperInstance = new Cropper(img, {\r\n                viewMode: 1,\r\n                dragMode: "none",\r\n                movable: false,\r\n                zoomOnTouch: false,\r\n                zoomOnWheel: false,\r\n                toggleDragModeOnDblclick: false,\r\n                aspectRatio: this.propsFinnal.imgCropOption.ratio,\r\n              });\r\n            };\r\n            oReader.readAsDataURL(params.file);\r\n\r\n            this.$watch("cropResult", resolve);\r\n          });\r\n\r\n          if (imgBlob) {\r\n            DEBUG && console.log("imgCrop", imgBlob);\r\n            formDataFileObj = imgBlob;\r\n            formDataFileName = fixJpgFileName(formDataFileName);\r\n            this.cropperMethod("close");\r\n          }\r\n        } else if (this.propsFinnal.imgCompress) {\r\n          // 图片压缩\r\n          const imgBlob = await fixImgFile(\r\n            params.file,\r\n            Object.assign({}, this.propsFinnal.imgCompressOption, {\r\n              outType: "blob",\r\n            })\r\n          );\r\n\r\n          DEBUG && console.log("imgCompress", imgBlob);\r\n          formDataFileObj = imgBlob;\r\n          formDataFileName = fixJpgFileName(formDataFileName);\r\n        }\r\n      }\r\n\r\n      // 上传\r\n      DEBUG && console.log("upload params", formDataFileName, formDataFileObj);\r\n      this.controller = new AbortController();\r\n      return theUploadRequest(formDataFileObj, formDataFileName, {\r\n        onUploadProgress: this.handleProgress,\r\n        signal: this.controller.signal,\r\n      }).then((res) => {\r\n        return res.data;\r\n      });\r\n    },\r\n    cropperMethod(action) {\r\n      // 剪裁相关处理方法\r\n      switch (action) {\r\n        case "save":\r\n          cropperInstance\r\n            .getCroppedCanvas({\r\n              minWidth: this.propsFinnal.imgCropOption.minWidth,\r\n              minHeight: this.propsFinnal.imgCropOption.minHeight,\r\n              maxWidth: this.propsFinnal.imgCropOption.maxWidth || 1000,\r\n              maxHeight: this.propsFinnal.imgCropOption.maxHeight || 1000,\r\n              imageSmoothingQuality: "medium",\r\n            })\r\n            .toBlob((blob) => {\r\n              this.cropResult = blob;\r\n            }, "image/jpeg");\r\n          break;\r\n        case "close":\r\n          this.dialogVisible = false;\r\n          if (cropperInstance) {\r\n            cropperInstance.destroy();\r\n          }\r\n          if (!this.cropResult) {\r\n            const newValue = [].concat(this.modelValue);\r\n            newValue.pop();\r\n            this.$emit("update:modelValue", newValue);\r\n          }\r\n          break;\r\n        case "rotateLeft":\r\n          cropperInstance.rotate(-90);\r\n          break;\r\n        case "rotateRight":\r\n          cropperInstance.rotate(90);\r\n          break;\r\n        case "scaleX":\r\n          cropperInstance.scaleX(-1);\r\n          break;\r\n        case "scaleY":\r\n          cropperInstance.scaleY(-1);\r\n          break;\r\n        case "reset":\r\n          cropperInstance.reset();\r\n          break;\r\n        default:\r\n          console.warn("cropperMethod 参数错误: ", action);\r\n      }\r\n    },\r\n    clearFiles() {\r\n      // el-upload 方法\r\n      this.$refs.myupload.clearFiles();\r\n    },\r\n    abort() {\r\n      this.controller.abort();\r\n    },\r\n    submit() {\r\n      // el-upload 方法\r\n      this.$refs.myupload.submit();\r\n    },\r\n  },\r\n};\r\n<\/script>\r\n\r\n<style scoped>\r\n/* 图片剪裁弹窗 */\r\n.cropper :deep(.el-dialog__body) {\r\n  padding: 0;\r\n}\r\n\r\n.cropper_main {\r\n  height: 50vh;\r\n  min-height: 500px;\r\n}\r\n\r\n.cropper_actions {\r\n  padding: 0.5em;\r\n}\r\n\r\n.cropper_actions :deep(.el-button-group) {\r\n  margin-right: 10px;\r\n}\r\n</style>\r\n'],sourceRoot:""}]);const l=s},950:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n(537),i=n.n(r),o=n(645),a=n.n(o),s=n(667),l=n.n(s),p=new URL(n(738),n.b),c=a()(i()),h=l()(p);c.push([e.id,'/*!\n * Cropper.js v1.5.12\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2021-06-12T08:00:11.623Z\n */.cropper-container{direction:ltr;font-size:0;line-height:0;position:relative;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.cropper-container img{display:block;height:100%;image-orientation:0deg;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}.cropper-canvas,.cropper-crop-box,.cropper-drag-box,.cropper-modal,.cropper-wrap-box{bottom:0;left:0;position:absolute;right:0;top:0}.cropper-canvas,.cropper-wrap-box{overflow:hidden}.cropper-drag-box{background-color:#fff;opacity:0}.cropper-modal{background-color:#000;opacity:.5}.cropper-view-box{display:block;height:100%;outline:1px solid #39f;outline-color:rgba(51,153,255,.75);overflow:hidden;width:100%}.cropper-dashed{border:0 dashed #eee;display:block;opacity:.5;position:absolute}.cropper-dashed.dashed-h{border-bottom-width:1px;border-top-width:1px;height:33.33333%;left:0;top:33.33333%;width:100%}.cropper-dashed.dashed-v{border-left-width:1px;border-right-width:1px;height:100%;left:33.33333%;top:0;width:33.33333%}.cropper-center{display:block;height:0;left:50%;opacity:.75;position:absolute;top:50%;width:0}.cropper-center:after,.cropper-center:before{background-color:#eee;content:" ";display:block;position:absolute}.cropper-center:before{height:1px;left:-3px;top:0;width:7px}.cropper-center:after{height:7px;left:0;top:-3px;width:1px}.cropper-face,.cropper-line,.cropper-point{display:block;height:100%;opacity:.1;position:absolute;width:100%}.cropper-face{background-color:#fff;left:0;top:0}.cropper-line{background-color:#39f}.cropper-line.line-e{cursor:ew-resize;right:-3px;top:0;width:5px}.cropper-line.line-n{cursor:ns-resize;height:5px;left:0;top:-3px}.cropper-line.line-w{cursor:ew-resize;left:-3px;top:0;width:5px}.cropper-line.line-s{bottom:-3px;cursor:ns-resize;height:5px;left:0}.cropper-point{background-color:#39f;height:5px;opacity:.75;width:5px}.cropper-point.point-e{cursor:ew-resize;margin-top:-3px;right:-3px;top:50%}.cropper-point.point-n{cursor:ns-resize;left:50%;margin-left:-3px;top:-3px}.cropper-point.point-w{cursor:ew-resize;left:-3px;margin-top:-3px;top:50%}.cropper-point.point-s{bottom:-3px;cursor:s-resize;left:50%;margin-left:-3px}.cropper-point.point-ne{cursor:nesw-resize;right:-3px;top:-3px}.cropper-point.point-nw{cursor:nwse-resize;left:-3px;top:-3px}.cropper-point.point-sw{bottom:-3px;cursor:nesw-resize;left:-3px}.cropper-point.point-se{bottom:-3px;cursor:nwse-resize;height:20px;opacity:1;right:-3px;width:20px}@media (min-width:768px){.cropper-point.point-se{height:15px;width:15px}}@media (min-width:992px){.cropper-point.point-se{height:10px;width:10px}}@media (min-width:1200px){.cropper-point.point-se{height:5px;opacity:.75;width:5px}}.cropper-point.point-se:before{background-color:#39f;bottom:-50%;content:" ";display:block;height:200%;opacity:0;position:absolute;right:-50%;width:200%}.cropper-invisible{opacity:0}.cropper-bg{background-image:url('+h+")}.cropper-hide{display:block;height:0;position:absolute;width:0}.cropper-hidden{display:none!important}.cropper-move{cursor:move}.cropper-crop{cursor:crosshair}.cropper-disabled .cropper-drag-box,.cropper-disabled .cropper-face,.cropper-disabled .cropper-line,.cropper-disabled .cropper-point{cursor:not-allowed}","",{version:3,sources:["webpack://./node_modules/cropperjs/dist/cropper.css"],names:[],mappings:"AAAA;;;;;;;;EAQE,CAEF,mBACE,aAAc,CACd,WAAY,CACZ,aAAc,CACd,iBAAkB,CAClB,qBAAsB,CACtB,iBAAkB,CAClB,wBAAyB,CACzB,qBAAsB,CACtB,oBAAqB,CACrB,gBACF,CAEA,uBACE,aAAc,CACd,WAAY,CACZ,sBAAuB,CACvB,yBAA2B,CAC3B,wBAA0B,CAC1B,sBAAwB,CACxB,qBAAuB,CACvB,UACF,CAEA,qFAKE,QAAS,CACT,MAAO,CACP,iBAAkB,CAClB,OAAQ,CACR,KACF,CAEA,kCAEE,eACF,CAEA,kBACE,qBAAsB,CACtB,SACF,CAEA,eACE,qBAAsB,CACtB,UACF,CAEA,kBACE,aAAc,CACd,WAAY,CACZ,sBAAuB,CACvB,kCAAuC,CACvC,eAAgB,CAChB,UACF,CAEA,gBACE,oBAAqB,CACrB,aAAc,CACd,UAAY,CACZ,iBACF,CAEA,yBACE,uBAAwB,CACxB,oBAAqB,CACrB,gBAAsB,CACtB,MAAO,CACP,aAAmB,CACnB,UACF,CAEA,yBACE,qBAAsB,CACtB,sBAAuB,CACvB,WAAY,CACZ,cAAoB,CACpB,KAAM,CACN,eACF,CAEA,gBACE,aAAc,CACd,QAAS,CACT,QAAS,CACT,WAAa,CACb,iBAAkB,CAClB,OAAQ,CACR,OACF,CAEA,6CAEE,qBAAsB,CACtB,WAAY,CACZ,aAAc,CACd,iBACF,CAEA,uBACE,UAAW,CACX,SAAU,CACV,KAAM,CACN,SACF,CAEA,sBACE,UAAW,CACX,MAAO,CACP,QAAS,CACT,SACF,CAEA,2CAGE,aAAc,CACd,WAAY,CACZ,UAAY,CACZ,iBAAkB,CAClB,UACF,CAEA,cACE,qBAAsB,CACtB,MAAO,CACP,KACF,CAEA,cACE,qBACF,CAEA,qBACE,gBAAiB,CACjB,UAAW,CACX,KAAM,CACN,SACF,CAEA,qBACE,gBAAiB,CACjB,UAAW,CACX,MAAO,CACP,QACF,CAEA,qBACE,gBAAiB,CACjB,SAAU,CACV,KAAM,CACN,SACF,CAEA,qBACE,WAAY,CACZ,gBAAiB,CACjB,UAAW,CACX,MACF,CAEA,eACE,qBAAsB,CACtB,UAAW,CACX,WAAa,CACb,SACF,CAEA,uBACE,gBAAiB,CACjB,eAAgB,CAChB,UAAW,CACX,OACF,CAEA,uBACE,gBAAiB,CACjB,QAAS,CACT,gBAAiB,CACjB,QACF,CAEA,uBACE,gBAAiB,CACjB,SAAU,CACV,eAAgB,CAChB,OACF,CAEA,uBACE,WAAY,CACZ,eAAgB,CAChB,QAAS,CACT,gBACF,CAEA,wBACE,kBAAmB,CACnB,UAAW,CACX,QACF,CAEA,wBACE,kBAAmB,CACnB,SAAU,CACV,QACF,CAEA,wBACE,WAAY,CACZ,kBAAmB,CACnB,SACF,CAEA,wBACE,WAAY,CACZ,kBAAmB,CACnB,WAAY,CACZ,SAAU,CACV,UAAW,CACX,UACF,CAEA,yBACE,wBACE,WAAY,CACZ,UACF,CACF,CAEA,yBACE,wBACE,WAAY,CACZ,UACF,CACF,CAEA,0BACE,wBACE,UAAW,CACX,WAAa,CACb,SACF,CACF,CAEA,+BACE,qBAAsB,CACtB,WAAY,CACZ,WAAY,CACZ,aAAc,CACd,WAAY,CACZ,SAAU,CACV,iBAAkB,CAClB,UAAW,CACX,UACF,CAEA,mBACE,SACF,CAEA,YACE,wDACF,CAEA,cACE,aAAc,CACd,QAAS,CACT,iBAAkB,CAClB,OACF,CAEA,gBACE,sBACF,CAEA,cACE,WACF,CAEA,cACE,gBACF,CAEA,qIAIE,kBACF",sourcesContent:["/*!\n * Cropper.js v1.5.12\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2021-06-12T08:00:11.623Z\n */\n\n.cropper-container {\n  direction: ltr;\n  font-size: 0;\n  line-height: 0;\n  position: relative;\n  -ms-touch-action: none;\n  touch-action: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.cropper-container img {\n  display: block;\n  height: 100%;\n  image-orientation: 0deg;\n  max-height: none !important;\n  max-width: none !important;\n  min-height: 0 !important;\n  min-width: 0 !important;\n  width: 100%;\n}\n\n.cropper-wrap-box,\n.cropper-canvas,\n.cropper-drag-box,\n.cropper-crop-box,\n.cropper-modal {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.cropper-wrap-box,\n.cropper-canvas {\n  overflow: hidden;\n}\n\n.cropper-drag-box {\n  background-color: #fff;\n  opacity: 0;\n}\n\n.cropper-modal {\n  background-color: #000;\n  opacity: 0.5;\n}\n\n.cropper-view-box {\n  display: block;\n  height: 100%;\n  outline: 1px solid #39f;\n  outline-color: rgba(51, 153, 255, 0.75);\n  overflow: hidden;\n  width: 100%;\n}\n\n.cropper-dashed {\n  border: 0 dashed #eee;\n  display: block;\n  opacity: 0.5;\n  position: absolute;\n}\n\n.cropper-dashed.dashed-h {\n  border-bottom-width: 1px;\n  border-top-width: 1px;\n  height: calc(100% / 3);\n  left: 0;\n  top: calc(100% / 3);\n  width: 100%;\n}\n\n.cropper-dashed.dashed-v {\n  border-left-width: 1px;\n  border-right-width: 1px;\n  height: 100%;\n  left: calc(100% / 3);\n  top: 0;\n  width: calc(100% / 3);\n}\n\n.cropper-center {\n  display: block;\n  height: 0;\n  left: 50%;\n  opacity: 0.75;\n  position: absolute;\n  top: 50%;\n  width: 0;\n}\n\n.cropper-center::before,\n.cropper-center::after {\n  background-color: #eee;\n  content: ' ';\n  display: block;\n  position: absolute;\n}\n\n.cropper-center::before {\n  height: 1px;\n  left: -3px;\n  top: 0;\n  width: 7px;\n}\n\n.cropper-center::after {\n  height: 7px;\n  left: 0;\n  top: -3px;\n  width: 1px;\n}\n\n.cropper-face,\n.cropper-line,\n.cropper-point {\n  display: block;\n  height: 100%;\n  opacity: 0.1;\n  position: absolute;\n  width: 100%;\n}\n\n.cropper-face {\n  background-color: #fff;\n  left: 0;\n  top: 0;\n}\n\n.cropper-line {\n  background-color: #39f;\n}\n\n.cropper-line.line-e {\n  cursor: ew-resize;\n  right: -3px;\n  top: 0;\n  width: 5px;\n}\n\n.cropper-line.line-n {\n  cursor: ns-resize;\n  height: 5px;\n  left: 0;\n  top: -3px;\n}\n\n.cropper-line.line-w {\n  cursor: ew-resize;\n  left: -3px;\n  top: 0;\n  width: 5px;\n}\n\n.cropper-line.line-s {\n  bottom: -3px;\n  cursor: ns-resize;\n  height: 5px;\n  left: 0;\n}\n\n.cropper-point {\n  background-color: #39f;\n  height: 5px;\n  opacity: 0.75;\n  width: 5px;\n}\n\n.cropper-point.point-e {\n  cursor: ew-resize;\n  margin-top: -3px;\n  right: -3px;\n  top: 50%;\n}\n\n.cropper-point.point-n {\n  cursor: ns-resize;\n  left: 50%;\n  margin-left: -3px;\n  top: -3px;\n}\n\n.cropper-point.point-w {\n  cursor: ew-resize;\n  left: -3px;\n  margin-top: -3px;\n  top: 50%;\n}\n\n.cropper-point.point-s {\n  bottom: -3px;\n  cursor: s-resize;\n  left: 50%;\n  margin-left: -3px;\n}\n\n.cropper-point.point-ne {\n  cursor: nesw-resize;\n  right: -3px;\n  top: -3px;\n}\n\n.cropper-point.point-nw {\n  cursor: nwse-resize;\n  left: -3px;\n  top: -3px;\n}\n\n.cropper-point.point-sw {\n  bottom: -3px;\n  cursor: nesw-resize;\n  left: -3px;\n}\n\n.cropper-point.point-se {\n  bottom: -3px;\n  cursor: nwse-resize;\n  height: 20px;\n  opacity: 1;\n  right: -3px;\n  width: 20px;\n}\n\n@media (min-width: 768px) {\n  .cropper-point.point-se {\n    height: 15px;\n    width: 15px;\n  }\n}\n\n@media (min-width: 992px) {\n  .cropper-point.point-se {\n    height: 10px;\n    width: 10px;\n  }\n}\n\n@media (min-width: 1200px) {\n  .cropper-point.point-se {\n    height: 5px;\n    opacity: 0.75;\n    width: 5px;\n  }\n}\n\n.cropper-point.point-se::before {\n  background-color: #39f;\n  bottom: -50%;\n  content: ' ';\n  display: block;\n  height: 200%;\n  opacity: 0;\n  position: absolute;\n  right: -50%;\n  width: 200%;\n}\n\n.cropper-invisible {\n  opacity: 0;\n}\n\n.cropper-bg {\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC');\n}\n\n.cropper-hide {\n  display: block;\n  height: 0;\n  position: absolute;\n  width: 0;\n}\n\n.cropper-hidden {\n  display: none !important;\n}\n\n.cropper-move {\n  cursor: move;\n}\n\n.cropper-crop {\n  cursor: crosshair;\n}\n\n.cropper-disabled .cropper-drag-box,\n.cropper-disabled .cropper-face,\n.cropper-disabled .cropper-line,\n.cropper-disabled .cropper-point {\n  cursor: not-allowed;\n}\n"],sourceRoot:""}]);const d=c},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r="undefined"!==typeof t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,o){"string"===typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var p=0;p<e.length;p++){var c=[].concat(e[p]);r&&a[c[0]]||("undefined"!==typeof o&&("undefined"===typeof c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},667:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},537:e=>{"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"===typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(i," */"),a=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[t].concat(a).concat([o]).join("\n")}return[t].join("\n")}},918:function(e,t){var r,i;(function(){var o=!1,a=function(e){return e instanceof a?e:this instanceof a?void(this.EXIFwrapped=e):new a(e)};e.exports&&(t=e.exports=a),t.EXIF=a;var s=a.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},l=a.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},p=a.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},c=a.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},h=a.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function d(e){return!!e.exifdata}function u(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),r=n.length,i=new ArrayBuffer(r),o=new Uint8Array(i),a=0;a<r;a++)o[a]=n.charCodeAt(a);return i}function g(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},n.send()}function f(e,t){function n(n){var r=m(n);e.exifdata=r||{};var i=A(n);if(e.iptcdata=i||{},a.isXmpEnabled){var o=E(n);e.xmpdata=o||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var r=u(e.src);n(r)}else if(/^blob\:/i.test(e.src)){var i=new FileReader;i.onload=function(e){n(e.target.result)},g(e.src,(function(e){i.readAsArrayBuffer(e)}))}else{var s=new XMLHttpRequest;s.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(s.response),s=null},s.open("GET",e.src,!0),s.responseType="arraybuffer",s.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){i=new FileReader;i.onload=function(e){o&&console.log("Got file of length "+e.target.result.byteLength),n(e.target.result)},i.readAsArrayBuffer(e)}}function m(e){var t=new DataView(e);if(o&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return o&&console.log("Not a valid JPEG"),!1;var n,r=2,i=e.byteLength;while(r<i){if(255!=t.getUint8(r))return o&&console.log("Not a valid marker at offset "+r+", found: "+t.getUint8(r)),!1;if(n=t.getUint8(r+1),o&&console.log(n),225==n)return o&&console.log("Found 0xFFE1 marker"),M(t,r+4,t.getUint16(r+2)-2);r+=2+t.getUint16(r+2)}}function A(e){var t=new DataView(e);if(o&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return o&&console.log("Not a valid JPEG"),!1;var n=2,r=e.byteLength,i=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};while(n<r){if(i(t,n)){var a=t.getUint8(n+7);a%2!==0&&(a+=1),0===a&&(a=4);var s=n+8+a,l=t.getUint16(n+6+a);return b(e,s,l)}n++}}var C={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function b(e,t,n){var r,i,o,a,s=new DataView(e),l={},p=t;while(p<t+n)28===s.getUint8(p)&&2===s.getUint8(p+1)&&(a=s.getUint8(p+2),a in C&&(o=s.getInt16(p+3),o+5,i=C[a],r=B(s,p+5,o),l.hasOwnProperty(i)?l[i]instanceof Array?l[i].push(r):l[i]=[l[i],r]:l[i]=r)),p++;return l}function v(e,t,n,r,i){var a,s,l,p=e.getUint16(n,!i),c={};for(l=0;l<p;l++)a=n+12*l+2,s=r[e.getUint16(a,!i)],!s&&o&&console.log("Unknown tag: "+e.getUint16(a,!i)),c[s]=w(e,a,t,n,i);return c}function w(e,t,n,r,i){var o,a,s,l,p,c,h=e.getUint16(t+2,!i),d=e.getUint32(t+4,!i),u=e.getUint32(t+8,!i)+n;switch(h){case 1:case 7:if(1==d)return e.getUint8(t+8,!i);for(o=d>4?u:t+8,a=[],l=0;l<d;l++)a[l]=e.getUint8(o+l);return a;case 2:return o=d>4?u:t+8,B(e,o,d-1);case 3:if(1==d)return e.getUint16(t+8,!i);for(o=d>2?u:t+8,a=[],l=0;l<d;l++)a[l]=e.getUint16(o+2*l,!i);return a;case 4:if(1==d)return e.getUint32(t+8,!i);for(a=[],l=0;l<d;l++)a[l]=e.getUint32(u+4*l,!i);return a;case 5:if(1==d)return p=e.getUint32(u,!i),c=e.getUint32(u+4,!i),s=new Number(p/c),s.numerator=p,s.denominator=c,s;for(a=[],l=0;l<d;l++)p=e.getUint32(u+8*l,!i),c=e.getUint32(u+4+8*l,!i),a[l]=new Number(p/c),a[l].numerator=p,a[l].denominator=c;return a;case 9:if(1==d)return e.getInt32(t+8,!i);for(a=[],l=0;l<d;l++)a[l]=e.getInt32(u+4*l,!i);return a;case 10:if(1==d)return e.getInt32(u,!i)/e.getInt32(u+4,!i);for(a=[],l=0;l<d;l++)a[l]=e.getInt32(u+8*l,!i)/e.getInt32(u+4+8*l,!i);return a}}function x(e,t,n){var r=e.getUint16(t,!n);return e.getUint32(t+2+12*r,!n)}function y(e,t,n,r){var i=x(e,t+n,r);if(!i)return{};if(i>e.byteLength)return{};var o=v(e,t,t+i,c,r);if(o["Compression"])switch(o["Compression"]){case 6:if(o.JpegIFOffset&&o.JpegIFByteCount){var a=t+o.JpegIFOffset,s=o.JpegIFByteCount;o["blob"]=new Blob([new Uint8Array(e.buffer,a,s)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",o["Compression"])}else 2==o["PhotometricInterpretation"]&&console.log("Thumbnail image format is RGB, which is not implemented.");return o}function B(e,t,r){var i="";for(n=t;n<t+r;n++)i+=String.fromCharCode(e.getUint8(n));return i}function M(e,t){if("Exif"!=B(e,t,4))return o&&console.log("Not valid EXIF data! "+B(e,t,4)),!1;var n,r,i,a,c,d=t+6;if(18761==e.getUint16(d))n=!1;else{if(19789!=e.getUint16(d))return o&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getUint16(d+2,!n))return o&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var u=e.getUint32(d+4,!n);if(u<8)return o&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(d+4,!n)),!1;if(r=v(e,d,d+u,l,n),r.ExifIFDPointer)for(i in a=v(e,d,d+r.ExifIFDPointer,s,n),a){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":a[i]=h[i][a[i]];break;case"ExifVersion":case"FlashpixVersion":a[i]=String.fromCharCode(a[i][0],a[i][1],a[i][2],a[i][3]);break;case"ComponentsConfiguration":a[i]=h.Components[a[i][0]]+h.Components[a[i][1]]+h.Components[a[i][2]]+h.Components[a[i][3]];break}r[i]=a[i]}if(r.GPSInfoIFDPointer)for(i in c=v(e,d,d+r.GPSInfoIFDPointer,p,n),c){switch(i){case"GPSVersionID":c[i]=c[i][0]+"."+c[i][1]+"."+c[i][2]+"."+c[i][3];break}r[i]=c[i]}return r["thumbnail"]=y(e,d,u,n),r}function E(e){if("DOMParser"in self){var t=new DataView(e);if(o&&console.log("Got file of length "+e.byteLength),255!=t.getUint8(0)||216!=t.getUint8(1))return o&&console.log("Not a valid JPEG"),!1;var n=2,r=e.byteLength,i=new DOMParser;while(n<r-4){if("http"==B(t,n,4)){var a=n-1,s=t.getUint16(n-2)-1,l=B(t,a,s),p=l.indexOf("xmpmeta>")+8;l=l.substring(l.indexOf("<x:xmpmeta"),p);var c=l.indexOf("x:xmpmeta")+10;l=l.slice(0,c)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+l.slice(c);var h=i.parseFromString(l,"text/xml");return S(h)}n++}}}function F(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);t["@attributes"][r.nodeName]=r.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++){var o=e.childNodes.item(i),a=o.nodeName;if(null==t[a])t[a]=F(o);else{if(null==t[a].push){var s=t[a];t[a]=[],t[a].push(s)}t[a].push(F(o))}}return t}function S(e){try{var t={};if(e.children.length>0)for(var n=0;n<e.children.length;n++){var r=e.children.item(n),i=r.attributes;for(var o in i){var a=i[o],s=a.nodeName,l=a.nodeValue;void 0!==s&&(t[s]=l)}var p=r.nodeName;if("undefined"==typeof t[p])t[p]=F(r);else{if("undefined"==typeof t[p].push){var c=t[p];t[p]=[],t[p].push(c)}t[p].push(F(r))}}else t=e.textContent;return t}catch(h){console.log(h.message)}}a.enableXmp=function(){a.isXmpEnabled=!0},a.disableXmp=function(){a.isXmpEnabled=!1},a.getData=function(e,t){return!((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)&&(d(e)?t&&t.call(e):f(e,t),!0)},a.getTag=function(e,t){if(d(e))return e.exifdata[t]},a.getIptcTag=function(e,t){if(d(e))return e.iptcdata[t]},a.getAllTags=function(e){if(!d(e))return{};var t,n=e.exifdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},a.getAllIptcTags=function(e){if(!d(e))return{};var t,n=e.iptcdata,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r},a.pretty=function(e){if(!d(e))return"";var t,n=e.exifdata,r="";for(t in n)n.hasOwnProperty(t)&&("object"==typeof n[t]?n[t]instanceof Number?r+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":r+=t+" : ["+n[t].length+" values]\r\n":r+=t+" : "+n[t]+"\r\n");return r},a.readFromBinaryFile=function(e){return m(e)},r=[],i=function(){return a}.apply(t,r),void 0===i||(e.exports=i)}).call(this)},744:(e,t)=>{"use strict";t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n}},685:(e,t,n)=>{var r=n(977);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var i=n(402).Z;i("7f770142",r,!0,{sourceMap:!0,shadowMode:!1})},663:(e,t,n)=>{var r=n(950);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var i=n(402).Z;i("02be78cb",r,!0,{sourceMap:!0,shadowMode:!1})},402:(e,t,n)=>{"use strict";function r(e,t){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=o[0],s=o[1],l=o[2],p=o[3],c={id:e+":"+i,css:s,media:l,sourceMap:p};r[a]?r[a].parts.push(c):n.push(r[a]={id:a,parts:[c]})}return n}n.d(t,{Z:()=>g});var i="undefined"!==typeof document;if("undefined"!==typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},a=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,l=0,p=!1,c=function(){},h=null,d="data-vue-ssr-id",u="undefined"!==typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function g(e,t,n,i){p=n,h=i||{};var a=r(e,t);return f(a),function(t){for(var n=[],i=0;i<a.length;i++){var s=a[i],l=o[s.id];l.refs--,n.push(l)}t?(a=r(e,t),f(a)):a=[];for(i=0;i<n.length;i++){l=n[i];if(0===l.refs){for(var p=0;p<l.parts.length;p++)l.parts[p]();delete o[l.id]}}}}function f(e){for(var t=0;t<e.length;t++){var n=e[t],r=o[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(A(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(i=0;i<n.parts.length;i++)a.push(A(n.parts[i]));o[n.id]={id:n.id,refs:1,parts:a}}}}function m(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function A(e){var t,n,r=document.querySelector("style["+d+'~="'+e.id+'"]');if(r){if(p)return c;r.parentNode.removeChild(r)}if(u){var i=l++;r=s||(s=m()),t=b.bind(null,r,i,!1),n=b.bind(null,r,i,!0)}else r=m(),t=v.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var C=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function b(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=C(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function v(e,t){var n=t.css,r=t.media,i=t.sourceMap;if(r&&e.setAttribute("media",r),h.ssrId&&e.setAttribute(d,t.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{while(e.firstChild)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},738:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC"},203:t=>{"use strict";t.exports=e}},r={};function i(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={id:e,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.exports}i.m=t,(()=>{i.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return i.d(t,{a:t}),t}})(),(()=>{i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}})(),(()=>{i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{i.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{i.p=""})(),(()=>{i.b=document.baseURI||self.location.href})();var o={};return(()=>{"use strict";if(i.r(o),i.d(o,{default:()=>V}),"undefined"!==typeof window){var e=window.document.currentScript,t=i(679);e=t(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:t});var n=e&&e.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);n&&(i.p=n[1])}var r=i(203),a=i(918);const s=function(e){return new Promise((t=>{(0,a.getData)(e,(function(){let e=(0,a.getTag)(this,"Orientation");t(e)}))}))},l=function(e,t){const n=document.createElement("canvas"),r=n.getContext("2d"),i=e.targetWidth||e.width,o=e.targetHeight||e.height;return 6===t?(n.width=o,n.height=i,r.translate(n.width/2,n.height/2),r.rotate(Math.PI/180*90),r.drawImage(e,-i/2,-o/2,n.height,n.width)):(n.width=i,n.height=o,r.drawImage(e,0,0,n.width,n.height)),new Promise((e=>{e(n)}))},p=function(e,t,n,r){let i=e,o=t;const a=function(){i=n,o=Math.round(n*(t/e))},s=function(){o=r,i=Math.round(r*(e/t))};return n&&r?(e>n||t>r)&&(e/t>n/r?a():s()):n?a():r&&s(),{width:i,height:o}},c=function(e,t){const n=Object.assign({maxWidth:null,maxHeight:null,ratio:2,outType:"base64"},t||{});return new Promise(((t,r)=>{0===e.type.indexOf("image/")?s(e).then((r=>{let i=new FileReader;i.onload=function(e){let i=e.target.result,o=document.createElement("img");o.onload=function(){if(n.maxWidth||n.maxHeight){let e;6===r?(e=p(o.height,o.width,n.maxWidth,n.maxHeight),o.targetWidth=e.height,o.targetHeight=e.width):(e=p(o.width,o.height,n.maxWidth,n.maxHeight),o.targetWidth=e.width,o.targetHeight=e.height)}l(o,r).then((e=>{"blob"===n.outType?e.toBlob(t,"image/jpeg",n.ratio):t(e.toDataURL("image/jpeg",n.ratio))}))},o.src=i},i.readAsDataURL(e)})).catch((e=>{r(e)})):r("非图片文件不支持压缩")}))};var h=i(129),d=i.n(h);i(663);const u=e=>((0,r.pushScopeId)("data-v-642381ed"),e=e(),(0,r.popScopeId)(),e),g=["id"],f=(0,r.createTextVNode)("点击上传"),m={class:"cropper_main"},A={src:"",ref:"CropperImg"},C={class:"cropper_actions flex-row align-center"},b={class:"flex-1"},v=u((()=>(0,r.createElementVNode)("i",{class:"el-icon-refresh-left"},null,-1))),w=(0,r.createTextVNode)(" 左旋 "),x=u((()=>(0,r.createElementVNode)("i",{class:"el-icon-refresh-right"},null,-1))),y=(0,r.createTextVNode)(" 右旋 "),B=u((()=>(0,r.createElementVNode)("i",{class:"el-icon-sort",style:{transform:"rotateZ(90deg)"}},null,-1))),M=(0,r.createTextVNode)(" 水平镜像 "),E=u((()=>(0,r.createElementVNode)("i",{class:"el-icon-sort"},null,-1))),F=(0,r.createTextVNode)(" 垂直镜像 "),S=u((()=>(0,r.createElementVNode)("i",{class:"el-icon-refresh"},null,-1))),D=(0,r.createTextVNode)(" 重置 "),k=u((()=>(0,r.createElementVNode)("i",{class:"el-icon-crop"},null,-1))),O=(0,r.createTextVNode)(" 确定 ");let T;const U=!1,N=function(e){return e.match(/\.jpg|\.jpeg$/)?e:e+".jpg"},R={props:{modelValue:{type:Array,required:!1,default(){return[]}},triggerId:{type:String,required:!1,default:"upload_image_trigger"+parseInt(1e8*Math.random())},limitSize:{type:Number,required:!1,default(){return 104857600}},imgCompress:{type:Boolean,required:!1,default(){return!0}},imgCompressOption:{type:Object,required:!1,default(){return{maxWidth:1e3,maxHeight:1e3}}},imgCrop:{type:Boolean,required:!1,default(){return!1}},imgCropOption:{type:Object,required:!1,default(){return{ratio:1,minWidth:0,minHeight:0,maxWidth:1e3,maxHeight:1e3}}},uploadMethod:{type:Function,required:!1},responseTransfer:{type:Function,required:!1,default(e){return e}}},data(){return{dialogVisible:!1,cropResult:null,fileListFinnal:[],controller:null}},computed:{acceptFinnal(){if(this.$attrs.accept&&-1!==this.$attrs.accept.indexOf("t-")){const e=this.$attrs.accept.split(",");let t=[];return e.forEach((e=>{t=t.concat(this.getExtByType(e))})),t.join(",")}return this.$attrs.accept||"*"},propsFinnal(){let e={};return Object.keys(this.$props).forEach((t=>{e[t]=this.getDefaultValue(t)})),e}},watch:{modelValue:{handler(e){this.fileListFinnal=this.$attrs.fileList||e||[],this.$refs.myupload&&(this.$refs.myupload.uploadFiles=e.filter((t=>-1!==e.findIndex((e=>e.uid===t.uid)))))},deep:!0,immediate:!0}},methods:{handleBeforeUpload:function(e){return e.size>this.propsFinnal.limitSize?(Vue.prototype.$message.warning("文件大小超出限制"),!1):"*"!==this.acceptFinnal&&-1===this.acceptFinnal.indexOf(e.name.substring(e.name.lastIndexOf(".")).toLowerCase())?(Vue.prototype.$message.warning("文件格式不正确"),!1):"function"===typeof this.$attrs["before-upload"]?this.$attrs["before-upload"](e):!this.globalOption||"function"!==typeof this.globalOption.beforeUpload||this.globalOption.beforeUpload(e)},handleonExceed:function(e,t){"function"===typeof this.$attrs["on-exceed"]?this.$attrs["on-exceed"](e,t):this.globalOption&&"function"===typeof this.globalOption.onExceed&&this.globalOption.onExceed(e,t)},handleChange:function(e,t){const n=t.filter((e=>"success"===e.status));n.length===t.length&&this.$emit("update:modelValue",n.map((e=>{let t=e.response?this.propsFinnal.responseTransfer(e.response):e;return t.uid=e.uid,t.status=e.status,t}))),"function"===typeof this.$attrs["on-change"]&&this.$attrs["on-change"](e,t)},handleProgress(e){"function"===typeof this.$attrs["on-progress"]&&(e.total>0&&(e.percent=e.loaded/e.total*100),this.$attrs["on-progress"](e))},handleRemove:function(e,t){this.$emit("update:modelValue",t.map((e=>{let t=e.response?this.propsFinnal.responseTransfer(e.response):e;return t.uid=e.uid,t}))),"function"===typeof this.$attrs["on-remove"]&&this.$attrs["on-remove"](e,t)},customUpload:async function(e){if(!this.globalOption&&!this.globalOption.uploadMethod&&!this.propsFinnal.uploadMethod)return console.warn("Uploader: The required configuration [uploadMethod] is missing!");const t=this.propsFinnal.uploadMethod||this.globalOption.uploadMethod;if("function"!==typeof t)return console.warn("Uploader: [uploadMethod] must be a Function!");const n=e.file.type;U&&console.log("uploadedFileType",n);let r=e.file,i=e.file.name;if(0===n.indexOf("image/"))if(this.propsFinnal.imgCrop){this.cropResult=null,this.dialogVisible=!0;const t=await new Promise((t=>{let n=new FileReader;n.onload=e=>{let t=e.target.result,n=this.$refs.CropperImg;n.src=t,T&&T.destroy(),T=new(d())(n,{viewMode:1,dragMode:"none",movable:!1,zoomOnTouch:!1,zoomOnWheel:!1,toggleDragModeOnDblclick:!1,aspectRatio:this.propsFinnal.imgCropOption.ratio})},n.readAsDataURL(e.file),this.$watch("cropResult",t)}));t&&(U&&console.log("imgCrop",t),r=t,i=N(i),this.cropperMethod("close"))}else if(this.propsFinnal.imgCompress){const t=await c(e.file,Object.assign({},this.propsFinnal.imgCompressOption,{outType:"blob"}));U&&console.log("imgCompress",t),r=t,i=N(i)}return U&&console.log("upload params",i,r),this.controller=new AbortController,t(r,i,{onUploadProgress:this.handleProgress,signal:this.controller.signal}).then((e=>e.data))},cropperMethod(e){switch(e){case"save":T.getCroppedCanvas({minWidth:this.propsFinnal.imgCropOption.minWidth,minHeight:this.propsFinnal.imgCropOption.minHeight,maxWidth:this.propsFinnal.imgCropOption.maxWidth||1e3,maxHeight:this.propsFinnal.imgCropOption.maxHeight||1e3,imageSmoothingQuality:"medium"}).toBlob((e=>{this.cropResult=e}),"image/jpeg");break;case"close":if(this.dialogVisible=!1,T&&T.destroy(),!this.cropResult){const e=[].concat(this.modelValue);e.pop(),this.$emit("update:modelValue",e)}break;case"rotateLeft":T.rotate(-90);break;case"rotateRight":T.rotate(90);break;case"scaleX":T.scaleX(-1);break;case"scaleY":T.scaleY(-1);break;case"reset":T.reset();break;default:console.warn("cropperMethod 参数错误: ",e)}},clearFiles(){this.$refs.myupload.clearFiles()},abort(){this.controller.abort()},submit(){this.$refs.myupload.submit()}}},P=Object.assign(R,{setup(e){const t=(0,r.getCurrentInstance)();t.appContext.config.globalProperties.$UploaderOption;return(t,n)=>{const i=(0,r.resolveComponent)("el-button"),o=(0,r.resolveComponent)("el-button-group"),a=(0,r.resolveComponent)("el-dialog"),s=(0,r.resolveComponent)("el-upload");return(0,r.openBlock)(),(0,r.createBlock)(s,(0,r.mergeProps)({ref:"myupload"},t.$attrs,{action:"",fileList:t.fileListFinnal,accept:t.acceptFinnal,"before-upload":t.handleBeforeUpload,"on-exceed":t.handleonExceed,"on-change":t.handleChange,"on-remove":t.handleRemove,"http-request":t.customUpload}),{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",{id:e.triggerId},[(0,r.renderSlot)(t.$slots,"default",{},(()=>[(0,r.createVNode)(i,null,{default:(0,r.withCtx)((()=>[f])),_:1})])),(0,r.renderSlot)(t.$slots,"trigger"),(0,r.renderSlot)(t.$slots,"tip")],8,g),(0,r.createVNode)(a,{modelValue:t.dialogVisible,"onUpdate:modelValue":n[6]||(n[6]=e=>(0,r.isRef)(dialogVisible)?dialogVisible.value=e:null),"append-to-body":"",title:"图像剪裁",top:"10vh","custom-class":"cropper","close-on-click-modal":!1,"close-on-press-escape":!1,onClose:n[7]||(n[7]=e=>t.cropperMethod("close"))},{default:(0,r.withCtx)((()=>[(0,r.createElementVNode)("div",m,[(0,r.createElementVNode)("img",A,null,512)]),(0,r.createElementVNode)("div",C,[(0,r.createElementVNode)("div",b,[(0,r.createVNode)(o,null,{default:(0,r.withCtx)((()=>[(0,r.createVNode)(i,{size:"small",title:"左旋",onClick:n[0]||(n[0]=e=>t.cropperMethod("rotateLeft"))},{default:(0,r.withCtx)((()=>[v,w])),_:1}),(0,r.createVNode)(i,{size:"small",title:"右旋",onClick:n[1]||(n[1]=e=>t.cropperMethod("rotateRight"))},{default:(0,r.withCtx)((()=>[x,y])),_:1})])),_:1}),(0,r.createVNode)(o,null,{default:(0,r.withCtx)((()=>[(0,r.createVNode)(i,{size:"small",title:"水平镜像",onClick:n[2]||(n[2]=e=>t.cropperMethod("scaleX"))},{default:(0,r.withCtx)((()=>[B,M])),_:1}),(0,r.createVNode)(i,{size:"small",title:"垂直镜像",onClick:n[3]||(n[3]=e=>t.cropperMethod("scaleY"))},{default:(0,r.withCtx)((()=>[E,F])),_:1})])),_:1}),(0,r.createVNode)(o,null,{default:(0,r.withCtx)((()=>[(0,r.createVNode)(i,{size:"small",title:"重置",onClick:n[4]||(n[4]=e=>t.cropperMethod("reset"))},{default:(0,r.withCtx)((()=>[S,D])),_:1})])),_:1})]),(0,r.createVNode)(i,{size:"small",type:"primary",plain:"",onClick:n[5]||(n[5]=e=>t.cropperMethod("save"))},{default:(0,r.withCtx)((()=>[k,O])),_:1})])])),_:1},8,["modelValue"])])),_:3},16,["fileList","accept","before-upload","on-exceed","on-change","on-remove","http-request"])}}});i(685);var I=i(744);const L=(0,I.Z)(P,[["__scopeId","data-v-642381ed"]]),W=L,j={install:function(e,t){e.config.globalProperties.$UploaderOption=t||{},e.component("uploader",W)}},V=j})(),o})()));
//# sourceMappingURL=index.umd.min.js.map